<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" xmlns:c="http://java.sun.com/jsp/jstl/core" template="template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <ui:param name="myPageTitle" value="#{msgs.plugin_Gei_WorldViews_BibliographicData_Title}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb label="#{msgs.startseite}" action="index" navId="a0" />
        <intranda:breadcrumb label="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
        <intranda:breadcrumb label="#{AktuelleSchritteForm.mySchritt.prozess.titel}" action="#{AktuelleSchritteForm.myPlugin.cancel}" />
        <intranda:breadcrumb label="#{myPageTitle}" noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <x:stylesheet media="screen" path="Gei_WorldViews.css" />

        <h:form id="myform" styleClass="form-horizontal form-bordered" prependId="false">
            <h:panelGroup id="inputFields" layout="block" styleClass="row">
                <h:inputHidden id="rowIndex" value="#{AktuelleSchritteForm.myPlugin.index}">
                </h:inputHidden>
                <h:inputHidden id="rowType" value="#{AktuelleSchritteForm.myPlugin.rowType}">
                </h:inputHidden>
                <h:commandButton id="rowDataBtn" class="gone">
                	<f:ajax execute="rowIndex rowType"/>
                </h:commandButton>
                <div class="col-sm-12">
                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{myPageTitle}" />
                            </h3>
                        </div>
                        <div class="box-content nopadding">
                        
                        			<div class="form-group">
										<div class="col-sm-3 control-label">
											<h:outputLabel for="maintitleOriginal" value="#{msgs.maintitleOriginal}"  />
										</div>
										<div class="col-sm-9">
											<div class="col-sm-10">
												<h:inputText id="maintitleOriginal" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.maintitleOriginal}">
												</h:inputText>
											</div>
											<div class="form-group col-sm-2">
												<div class="col-sm-4 control-label" style="padding-left: 16px; font-size:13px">
				                                    <label>#{msgs.languageMainTitle}</label>
				                                </div>
				                                <div class="col-sm-8 inner-form">
				                                	<div class="input-group">
						                        		<h:inputText value="#{AktuelleSchritteForm.myPlugin.data.languageMainTitle}" styleClass="form-control">
					                                    	<f:ajax execute="@form" event="valueChange" />
					                                    </h:inputText>
					                                    <div class="input-group-addon" style="padding-top: 4px;padding-bottom: 4px;">
					                                    	<a title="#{msgs.search}" href="#" id="languageTriggerMainTitle" data-toggle="modal" data-row="#{row.index}" data-target="#languageBox">
				                            					<i class="fa fa-search font-black" />
				                           			 		</a>
				                           			 	</div>
						                      	  </div>
						                        </div>
				                           			
				                                    <script type="text/javascript">
				                                                 $('a[id*="languageTriggerMainTitle"]').on('click', function() {
				                                                    var currIndex = $(this ).attr('data-row' );
				                                                    $('#rowIndex' ).val("0" );
				                                                    $('#rowType' ).val("languageMainTitle" );
				                                              	   $("#rowDataBtn").click();
				                                                 } );
				                                    </script>
				                            </div>
												<h:message for="maintitleOriginal" showDetail="true"
													styleClass="help-inline font-danger" />
												<h:outputText styleClass="help-block font-light"
													rendered="#{NavigationForm.showHelp}"
													value="#{msgs._GEI_DESCRIPTION_TITLE}" />
										</div>
								</div>
                        
                        
<!--                             <intranda:formInputText label="#{msgs.maintitleOriginal}" field="#{AktuelleSchritteForm.myPlugin.data.maintitleOriginal}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="maintitleOriginal" fieldStyle="form-control" required="false" /> -->
                            <intranda:formInputText label="#{msgs.subtitleOriginal}" field="#{AktuelleSchritteForm.myPlugin.data.subtitleOriginal}" help="#{msgs._GEI_DESCRIPTION_SUBTITLE}" name="subtitleOriginal" fieldStyle="form-control" required="false" />

                            <intranda:formInputText label="#{msgs.maintitleGerman}" field="#{AktuelleSchritteForm.myPlugin.data.maintitleGerman}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="maintitleGerman" fieldStyle="form-control" required="false" />
                            <intranda:formInputText label="#{msgs.maintitleEnglish}" field="#{AktuelleSchritteForm.myPlugin.data.maintitleEnglish}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="maintitleEnglish" fieldStyle="form-control" required="false" />

                            <div class="form-group">

                                <div class="col-sm-3 control-label">
                                    <label>#{msgs.bookPerson}</label>
                                </div>
                                <div class="col-sm-9 inner-form">

                                    <ui:repeat var="author" value="#{AktuelleSchritteForm.myPlugin.data.personList}" varStatus="row">
										<div class="subform">
	                                        <intranda:formInputText label="#{msgs.firstname}" field="#{author.firstName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_FIRSTNAME}" name="author" style="padding:4px;" fieldStyle="form-control" required="false" />
	                                        <intranda:formInputText label="#{msgs.lastname}" field="#{author.lastName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_LASTNAME}" name="lastname" style="padding:4px;" fieldStyle="form-control" required="false" />
	                                        <intranda:formInputDropDown label="#{msgs.role}" field="#{author.role}" help="#{msgs.help_GEI_DESCRIPTION_AUTHOR_ROLE}" name="role" style="padding:4px;" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePersons}" required="false" fieldStyle="form-control" />
	
	                                        <div class="form-group" style="padding:4px;">
	                                            <div class="col-sm-3 control-label">
	                                                <h:outputText value="#{msgs.mets_authority_data}" />
	                                            </div>
	
	                                            <div class="col-sm-9">
	                                            	<div class="row" style="margin-left:0px;margin-right:0px;">
	                                                     	<div class="col-sm-3">
	                                                            <h:selectOneMenu value="#{author.normdataAuthority}" styleClass="form-control">
		                                                            <f:ajax execute="@form" event="valueChange" />
		                                                            <f:selectItem itemLabel="gnd" itemValue="gnd" />
		                                                            <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
		                                                        </h:selectOneMenu>
		                                                    </div>
	                                            			
	                                            			<div class="col-sm-9" style="background-color:#f6f6f6;">
			                                                    <div class="input-group" style="padding-left:5px;">
	                                                        		<h:inputText value="#{author.normdataValue}" styleClass="form-control">
	                                                            		<f:ajax execute="@form" event="valueChange" />
	                                                        		</h:inputText>
	                                                        		<div class="input-group-addon" style="padding-top: 4px;padding-bottom: 4px;">
	                                                            		<h:commandLink tabindex="-1" title="#{msgs.deletePerson}" action="#{AktuelleSchritteForm.myPlugin.data.deleteBookAuthor}" style="margin-right:5px;">
	                                                                		<i class="fa fa-trash-o font-black" />
	                                                                		<f:setPropertyActionListener value="#{author}" target="#{AktuelleSchritteForm.myPlugin.data.currentPerson}" />
	                                                                		<f:ajax execute="@form" render="@form" />
	                                                            		</h:commandLink>
	
	                                                            		<a title="#{msgs.search}" href="#" id="rowIndexTrigger-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox">
	                                                                		<i class="fa fa-search font-black" />
	                                                            		</a>
																	</div>
																</div>
	                                                    	</div>
	                                                </div>
	                                            </div>
	                                        </div>

                                        </div>

                                    </ui:repeat>
                                    <script type="text/javascript">
                                            $('a[id*="rowIndexTrigger-"]').on('click', function() {
                                               var currIndex = $(this ).attr('data-row' );
                                               $('#rowIndex' ).val(currIndex );
                                               $('#rowType' ).val("bookPerson" );
                                               $("#rowDataBtn").click();
                                            } );
                                        </script>
                                    <div id="duplicatebuttonsPerson">
                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addPerson}" action="#{AktuelleSchritteForm.myPlugin.data.addNewBookAuthor}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addPerson}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </div>
                                </div>


                            </div>
                            
                                                        <div class="form-group">

                                <div class="col-sm-3 control-label">
                                   <label>#{msgs.corporation}</label>
                                </div>
                                <div class="col-sm-9 inner-form">

                                    <ui:repeat var="corporation" value="#{AktuelleSchritteForm.myPlugin.data.corporationList}" varStatus="row">
                                    	<div class="subform">
	
	                                        <intranda:formInputText label="#{msgs.name}" field="#{corporation.name}" help="#{msgs._GEI_DESCRIPTION_PUBLISHER}" name="corporation" fieldStyle="form-control" style="padding:4px;" required="false" />
	                                        <intranda:formInputDropDown label="#{msgs.role}" field="#{corporation.role}" help="#{msgs.help_GEI_DESCRIPTION_PUBLISHER_ROLE}" name="prole" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleCorporations}" required="false" fieldStyle="form-control" style="padding:4px;"   />
	
	                                        <div class="form-group" style="padding:4px;">
	                                            <div class="col-sm-3 control-label">
	                                                <h:outputText value="#{msgs.mets_authority_data}" />
	                                            </div>
	
	                                            <div class="col-sm-9">
	                                                <div class="row" style="margin-left:0px;margin-right:0px;">
                                                     	<div class="col-sm-3">
	                                                        <h:selectOneMenu value="#corporation.normdataAuthority}" styleClass="form-control">
	                                                            <f:ajax execute="@form" event="valueChange" />
	                                                            <f:selectItem itemLabel="gnd" itemValue="gnd" />
	                                                            <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
	                                                        </h:selectOneMenu>
                                                    	</div>
                                                    	<div class="col-sm-9" style="background-color:#f6f6f6;">
                                                     		<div class="input-group" style="padding-left:5px;">
                                                        		<h:inputText value="#{corporation.normdataValue}" styleClass="form-control">
                                                            		<f:ajax execute="@form" event="valueChange" />
                                                        		</h:inputText>
                                                        		<div class="input-group-addon" style="padding:4px;"  >
		                                                            <!--  delete -->
		                                                            <h:commandLink tabindex="-1" title="#{msgs.deleteCorporation}" action="#{AktuelleSchritteForm.myPlugin.data.deleteCorporation}" style="margin-right:5px;">
		                                                                <i class="fa fa-trash-o font-black" style="margin-left: 3px" />
		                                                                <f:setPropertyActionListener value="#{corporation}" target="#{AktuelleSchritteForm.myPlugin.data.currentCorporation}" />
		                                                                <f:ajax execute="@form" render="@form" />
		                                                            </h:commandLink>
		                                                            <a title="#{msgs.search}" href="#" id="rowIndexTrigger2-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox">
		                                                                <i class="fa fa-search font-black" />
		                                                            </a>
                                                        		</div>
                                                    		</div>
                                                    	</div>
	                                                </div>
	                                            </div>
	                                        </div>

                                        </div>


                                    </ui:repeat>
                                    <script type="text/javascript">
                                         $('a[id*="rowIndexTrigger2-"]').on('click', function() {
                                            var currIndex = $(this ).attr('data-row' );
                                            $('#rowIndex' ).val(currIndex );
                                            $('#rowType' ).val("bookCorporation" );
                                            $("#rowDataBtn").click();
                                         } );
                                         </script>

                                    <h:panelGroup layout="block" id="duplicatebuttonsCorporation">
                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addCorporation}" action="#{AktuelleSchritteForm.myPlugin.data.addNewCorporation}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addCorporation}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </h:panelGroup>
                                </div>


                            </div>

                            <div class="form-group">

                                <div class="col-sm-3 control-label">
                                    <label>#{msgs.placeOfPublication}</label>
                                </div>
                                <div class="col-sm-9 inner-form">

									<ui:repeat var="location" value="#{AktuelleSchritteForm.myPlugin.data.placeOfPublicationList}" varStatus="row">
										<div class="subform">
		                                    <intranda:formInputText label="#{msgs.name}" field="#{location.name}" help="#{msgs._GEI_DESCRIPTION_PLACE}" name="placeOfPublicationGerman" fieldStyle="form-control" style="padding:4px;" required="false" />
		                                    <div class="form-group" style="padding:4px;">
		                                        <div class="col-sm-3 control-label">
		                                            <h:outputText value="#{msgs.mets_authority_data}" />
		                                        </div>
		
		                                        <div class="col-sm-9">
		                                            <div class="row" style="margin-left:0px;margin-right:0px;">
	                                                     <div class="col-sm-3">
			                                             	<h:selectOneMenu value="#{location.normdataAuthority}" styleClass="form-control">
			                                                	<f:ajax execute="@form" event="valueChange" />
			                                                    <f:selectItem itemLabel="geonames" itemValue="geonames" />
			                                                </h:selectOneMenu>
		                                               	</div>
		                                                	
		                                                <div class="col-sm-9" style="background-color:#f6f6f6;">
	                                                     	<div class="input-group" style="padding-left:5px;">
			                                                    <h:inputText value="#{location.normdataValue}" styleClass="form-control">
			                                                        <f:ajax execute="@form" event="valueChange" />
			                                                    </h:inputText>
			                                                    
			                                                    <div class="input-group-addon" style="padding-top: 4px;padding-bottom: 4px;">
		                                                            <h:commandLink tabindex="-1" title="#{msgs.deletePlace}" action="#{AktuelleSchritteForm.myPlugin.data.deletePlaceOfPublication}" style="margin-right:5px;">
		                                                                <i class="fa fa-trash-o font-black" />
		                                                                <f:setPropertyActionListener value="#{location}" target="#{AktuelleSchritteForm.myPlugin.data.currentLocation}" />
		                                                                <f:ajax execute="@form" render="@form" />
		                                                            </h:commandLink>
			
		                                                            <a title="#{msgs.search}" href="#" id="location-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#geonamesBox">
		                                                                <i class="fa fa-search font-black" />
		                                                            </a>
		                                                        </div>
		                                                	</div>
		
		                                                </div>
		                                            </div>
		                                        </div>
		                                    </div>
	                                    </div>
                                    </ui:repeat>
                                    <script type="text/javascript">
                                            $('a[id*="location-"]').on('click', function() {
                                               var currIndex = $(this ).attr('data-row' );
                                               $('#rowIndex' ).val(currIndex );
                                               $('#rowType' ).val("place" );
                                               $("#rowDataBtn").click();
                                            } );
                                        </script>
                                    <div id="duplicatebuttonsPlace">
                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addPlace}" action="#{AktuelleSchritteForm.myPlugin.data.addNewPlaceOfPublication}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addPlace}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </div>


                                </div>
                            </div>


                            <intranda:formInputText label="#{msgs.publicationYear}" field="#{AktuelleSchritteForm.myPlugin.data.publicationYear}" help="#{msgs._GEI_DESCRIPTION_YEAR}" name="publicationYear" fieldStyle="form-control" required="false" />

<div class="form-group">

                                <div class="col-sm-3 control-label">
                                   <label>#{msgs.publisher}</label>
                                </div>
                                <div class="col-sm-9 inner-form">

                                    <ui:repeat var="publisher" value="#{AktuelleSchritteForm.myPlugin.data.publisherList}" varStatus="row">
                                    	<div class="subform">
	                                        <!--                                         <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.publisherList}" var="publisher"> -->
	
	                                        <intranda:formInputText label="#{msgs.name}" field="#{publisher.name}" help="#{msgs._GEI_DESCRIPTION_PUBLISHER}" name="publisher" fieldStyle="form-control" style="padding:4px;" required="false" />
	                                        <intranda:formInputDropDown label="#{msgs.role}" field="#{publisher.role}" help="#{msgs.help_GEI_DESCRIPTION_PUBLISHER_ROLE}" name="prole" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePublisher}" required="false" fieldStyle="form-control" style="padding:4px;"   />
	
	                                        <div class="form-group" style="padding:4px;">
	                                            <div class="col-sm-3 control-label">
	                                                <h:outputText value="#{msgs.mets_authority_data}" />
	                                            </div>
	
	                                            <div class="col-sm-9">
	                                                <div class="row" style="margin-left:0px;margin-right:0px;">
                                                     	<div class="col-sm-3">
	                                                        <h:selectOneMenu value="#{publisher.normdataAuthority}" styleClass="form-control">
	                                                            <f:ajax execute="@form" event="valueChange" />
	                                                            <f:selectItem itemLabel="gnd" itemValue="gnd" />
	                                                            <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
	                                                        </h:selectOneMenu>
                                                    	</div>
                                                    	<div class="col-sm-9" style="background-color:#f6f6f6;">
                                                     		<div class="input-group" style="padding-left:5px;">
                                                        		<h:inputText value="#{publisher.normdataValue}" styleClass="form-control">
                                                            		<f:ajax execute="@form" event="valueChange" />
                                                        		</h:inputText>
                                                        		<div class="input-group-addon" style="padding:4px;"  >
		                                                            <!--  delete -->
		                                                            <h:commandLink tabindex="-1" title="#{msgs.deletePublisher}" action="#{AktuelleSchritteForm.myPlugin.data.deletePublisher}" style="margin-right:5px;">
		                                                                <i class="fa fa-trash-o font-black" style="margin-left: 3px" />
		                                                                <f:setPropertyActionListener value="#{publisher}" target="#{AktuelleSchritteForm.myPlugin.data.currentPublisher}" />
		                                                                <f:ajax execute="@form" render="@form" />
		                                                            </h:commandLink>
		                                                            <a title="#{msgs.search}" href="#" id="rowIndexTrigger3-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox">
		                                                                <i class="fa fa-search font-black" />
		                                                            </a>
                                                        		</div>
                                                    		</div>
                                                    	</div>
	                                                </div>
	                                            </div>
	                                        </div>

                                        </div>


                                    </ui:repeat>
                                    <script type="text/javascript">
                                         $('a[id*="rowIndexTrigger3-"]').on('click', function() {
                                            var currIndex = $(this ).attr('data-row' );
                                            $('#rowIndex' ).val(currIndex );
                                            $('#rowType' ).val("publisher" );
                                            $("#rowDataBtn").click();
                                         } );
                                         </script>

                                    <h:panelGroup layout="block" id="duplicatebuttonsPublisher">
                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addPublisher}" action="#{AktuelleSchritteForm.myPlugin.data.addNewPublisher}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addPublisher}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </h:panelGroup>
                                </div>


                            </div>

                            <h:panelGroup rendered="#{AktuelleSchritteForm.myPlugin.data.documentType == 'multivolume'}">
                                
                                <div class="form-group">
										<div class="col-sm-3 control-label">
											<h:outputLabel for="volumeTitleOriginal" value="#{msgs.volumeMaintitleOriginal}"  />
										</div>
										<div class="col-sm-9">
											<div class="col-sm-10">
												<h:inputText id="volumeTitleOriginal" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.volumeTitleOriginal}">
												</h:inputText>
											</div>
											<div class="form-group col-sm-2">
												<div class="col-sm-4 control-label" style="padding-left: 16px; font-size:13px">
				                                    <label>#{msgs.languageVolumeTitle}</label>
				                                </div>
				                                <div class="col-sm-8 inner-form">
				                                	<div class="input-group">
						                        		<h:inputText value="#{AktuelleSchritteForm.myPlugin.data.languageVolumeTitle}" styleClass="form-control">
					                                    	<f:ajax execute="@form" event="valueChange" />
					                                    </h:inputText>
					                                    <div class="input-group-addon" style="padding-top: 4px;padding-bottom: 4px;">
					                                    	<a title="#{msgs.search}" href="#" id="languageTriggerVolumeTitle" data-toggle="modal" data-row="#{row.index}" data-target="#languageBox">
				                            					<i class="fa fa-search font-black" />
				                           			 		</a>
				                           			 	</div>
						                      	  </div>
						                        </div>
				                           			
				                                    <script type="text/javascript">
				                                                 $('a[id*="languageTriggerVolumeTitle"]').on('click', function() {
				                                                    var currIndex = $(this ).attr('data-row' );
				                                                    $('#rowIndex' ).val("0" );
				                                                    $('#rowType' ).val("languageVolumeTitle" );
				                                                    $("#rowDataBtn").click();
				                                                 } );
				                                    </script>
				                            </div>
												<h:message for="volumeTitleOriginal" showDetail="true"
													styleClass="help-inline font-danger" />
												<h:outputText styleClass="help-block font-light"
													rendered="#{NavigationForm.showHelp}"
													value="#{msgs._GEI_DESCRIPTION_TITLE}" />
										</div>
								</div>
                                
<!--                                 <intranda:formInputText label="#{msgs.volumeMaintitleOriginal}" field="#{AktuelleSchritteForm.myPlugin.data.volumeTitleOriginal}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeTitleOriginal" fieldStyle="form-control" required="false" /> -->

								<intranda:formInputText label="#{msgs.volumeMaintitleGerman}" field="#{AktuelleSchritteForm.myPlugin.data.volumeTitleGerman}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeTitleGerman" fieldStyle="form-control" required="false" />
                                <intranda:formInputText label="#{msgs.volumeMaintitleEnglish}" field="#{AktuelleSchritteForm.myPlugin.data.volumeTitleEnglish}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeTitleEnglish" fieldStyle="form-control" required="false" />
                                <intranda:formInputText label="#{msgs.volumeNumber}" field="#{AktuelleSchritteForm.myPlugin.data.volumeNumber}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeNumber" fieldStyle="form-control" required="false" />


                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <label>#{msgs.volumePerson}</label>
                                    </div>
                                    <div class="col-sm-9 inner-form">
                                        <ui:repeat var="vauthor" value="#{AktuelleSchritteForm.myPlugin.data.volumePersonList}" varStatus="row">

											<div class="subform">

	                                            <intranda:formInputText label="#{msgs.firstname}" field="#{vauthor.firstName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_FIRSTNAME}" name="author" fieldStyle="form-control" style="padding:4px;" required="false" />
	                                            <intranda:formInputText label="#{msgs.lastname}" field="#{vauthor.lastName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_LASTNAME}" name="lastname" fieldStyle="form-control" style="padding:4px;" required="false" />
	                                            <intranda:formInputDropDown label="#{msgs.role}" field="#{vauthor.role}" help="#{msgs.help_GEI_DESCRIPTION_AUTHOR_ROLE}" name="role" style="padding:4px;" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePersons}" required="false" fieldStyle="form-control" />
	
	                                            <div class="form-group" style="padding:4px;">
	                                                <div class="col-sm-3 control-label">
	                                                    <h:outputText value="#{msgs.mets_authority_data}" />
	                                                </div>
	
	                                                <div class="col-sm-9">
	                                                   <div class="row" style="margin-left:0px;margin-right:0px;">
	                                                     	<div class="col-sm-3">
	                                                            <h:selectOneMenu value="#{vauthor.normdataAuthority}" styleClass="form-control">
	                                                                <f:ajax execute="@form" event="valueChange" />
	                                                                <f:selectItem itemLabel="gnd" itemValue="gnd" />
	                                                                <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
	                                                            </h:selectOneMenu>
	                                                        </div>
	                                                        
	                                                        <div class="col-sm-9" style="background-color:#f6f6f6;">
	                                                     		<div class="input-group" style="padding-left:5px;">
		                                                            <h:inputText value="#{vauthor.normdataValue}" styleClass="form-control">
		                                                                <f:ajax execute="@form" event="valueChange" />
		                                                            </h:inputText>
		                                                            <div class="input-group-addon" style="padding-top: 4px;padding-bottom: 4px;">
		                                                                <h:commandLink tabindex="-1" title="#{msgs.deletePerson}" action="#{AktuelleSchritteForm.myPlugin.data.deleteVolumeAuthor}" style="margin-right:5px;">
		                                                                    <i class="fa fa-trash-o font-black" style="margin-left: 3px" />
		                                                                    <f:setPropertyActionListener value="#{vauthor}" target="#{AktuelleSchritteForm.myPlugin.data.currentPerson}" />
		                                                                    <f:ajax execute="@form" render="@form" />
		                                                                </h:commandLink>
		                                                                <a title="#{msgs.search}" href="#" id="rowIndexTrigger1-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox">
		                                                                    <i class="fa fa-search font-black" />
		                                                                </a>
		                                                            </div>
		                                                        </div>
	                                                        </div>
	                                                    </div>
	                                                </div>
	                                            </div>
	
	                                        </div>

                                        </ui:repeat>
                                        <script type="text/javascript">
                                                 $('a[id*="rowIndexTrigger1-"]').on('click', function() {
                                                    var currIndex = $(this ).attr('data-row' );
                                                    $('#rowIndex' ).val(currIndex );
                                                    $('#rowType' ).val("volumePerson" );
                                                    $("#rowDataBtn").click();
                                                 } );
                                            </script>
                                        <div>
                                            <h:commandLink tabindex="-1" title="#{msgs.addPerson}" action="#{AktuelleSchritteForm.myPlugin.data.addNewVolumeAuthor}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addPerson}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">

                                <div class="col-sm-3 control-label">
                                    <label>#{msgs.volumeCorporation}</label>
                                </div>
                                <div class="col-sm-9 inner-form">

                                    <ui:repeat var="corporation" value="#{AktuelleSchritteForm.myPlugin.data.volumeCorporationList}" varStatus="row">
                                    	<div class="subform">
	
	                                        <intranda:formInputText label="#{msgs.name}" field="#{corporation.name}" help="#{msgs._GEI_DESCRIPTION_PUBLISHER}" name="corporation" fieldStyle="form-control" style="padding:4px;" required="false" />
	                                        <intranda:formInputDropDown label="#{msgs.role}" field="#{corporation.role}" help="#{msgs.help_GEI_DESCRIPTION_PUBLISHER_ROLE}" name="prole" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleCorporations}" required="false" fieldStyle="form-control" style="padding:4px;"   />
	
	                                        <div class="form-group" style="padding:4px;">
	                                            <div class="col-sm-3 control-label">
	                                                <h:outputText value="#{msgs.mets_authority_data}" />
	                                            </div>
	
	                                            <div class="col-sm-9">
	                                                <div class="row" style="margin-left:0px;margin-right:0px;">
                                                     	<div class="col-sm-3">
	                                                        <h:selectOneMenu value="#corporation.normdataAuthority}" styleClass="form-control">
	                                                            <f:ajax execute="@form" event="valueChange" />
	                                                            <f:selectItem itemLabel="gnd" itemValue="gnd" />
	                                                            <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
	                                                        </h:selectOneMenu>
                                                    	</div>
                                                    	<div class="col-sm-9" style="background-color:#f6f6f6;">
                                                     		<div class="input-group" style="padding-left:5px;">
                                                        		<h:inputText value="#{corporation.normdataValue}" styleClass="form-control">
                                                            		<f:ajax execute="@form" event="valueChange" />
                                                        		</h:inputText>
                                                        		<div class="input-group-addon" style="padding:4px;"  >
		                                                            <!--  delete -->
		                                                            <h:commandLink tabindex="-1" title="#{msgs.deleteCorporation}" action="#{AktuelleSchritteForm.myPlugin.data.deleteVolumeCorporation}" style="margin-right:5px;">
		                                                                <i class="fa fa-trash-o font-black" style="margin-left: 3px" />
		                                                                <f:setPropertyActionListener value="#{corporation}" target="#{AktuelleSchritteForm.myPlugin.data.currentCorporation}" />
		                                                                <f:ajax execute="@form" render="@form" />
		                                                            </h:commandLink>
		                                                            <a title="#{msgs.search}" href="#" id="rowIndexTrigger4-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox">
		                                                                <i class="fa fa-search font-black" />
		                                                            </a>
                                                        		</div>
                                                    		</div>
                                                    	</div>
	                                                </div>
	                                            </div>
	                                        </div>

                                        </div>


                                    </ui:repeat>
                                    <script type="text/javascript">
                                         $('a[id*="rowIndexTrigger4-"]').on('click', function() {
                                            var currIndex = $(this ).attr('data-row' );
                                            $('#rowIndex' ).val(currIndex );
                                            $('#rowType' ).val("volumeCorporation" );
                                            $("#rowDataBtn").click();
                                         } );
                                         </script>

                                    <h:panelGroup layout="block" id="duplicatebuttonsVolumeCorp">
                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addCorporation}" action="#{AktuelleSchritteForm.myPlugin.data.addNewVolumeCorporation}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addCorporation}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </h:panelGroup>
                                </div>


                            </div>

                            </h:panelGroup>


                            <div class="form-group">

                                <div class="col-sm-3 control-label">
                                    <label>#{msgs.country}</label>
                                </div>
                                <div class="col-sm-9 inner-form">
                                    <ui:repeat var="country" value="#{AktuelleSchritteForm.myPlugin.data.countryList}" varStatus="row">
										 <div class="subform">
	                                        <intranda:formInputText label="#{msgs.name}" field="#{country.name}" help="#{msgs.GEI_DESCRIPTION_COUNTRY}" name="country" fieldStyle="form-control" style="padding:4px;" required="false" />
	
	                                        <div class="form-group" style="padding:4px;">
	                                            <div class="col-sm-3 control-label">
	                                                <h:outputText value="#{msgs.mets_authority_data}" />
	                                            </div>
	
	                                             <div class="col-sm-9">
                                                     <div class="row" style="margin-left:0px;margin-right:0px;">
                                                     	<div class="col-sm-3">
	                                                        <h:selectOneMenu value="#{country.normdataAuthority}" styleClass="form-control">
	                                                            <f:ajax execute="@form" event="valueChange" />
	                                                            <f:selectItem itemLabel="geonames" itemValue="geonames" />
	                                                        </h:selectOneMenu>
	                                                    </div>
                                                    	<div class="col-sm-9" style="background-color:#f6f6f6;">
                                                     		<div class="input-group" style="padding-left:5px;">
		                                                        <h:inputText value="#{country.normdataValue}" styleClass="form-control">
		                                                            <f:ajax execute="@form" event="valueChange" />
		                                                        </h:inputText>
		                                                        <div class="input-group-addon" style="padding-top: 4px;padding-bottom: 4px;">
		                                                            <h:commandLink tabindex="-1" title="#{msgs.deleteCountry}" action="#{AktuelleSchritteForm.myPlugin.data.deleteCountry}" style="margin-right:5px;">
		                                                                <i class="fa fa-trash-o font-black" style="margin-left: 3px" />
		                                                                <f:setPropertyActionListener value="#{country}" target="#{AktuelleSchritteForm.myPlugin.data.currentLocation}" />
		                                                                <f:ajax execute="@form" render="@form" />
		                                                            </h:commandLink>
		                                                            <a title="#{msgs.search}" href="#" id="rowIndexTrigger5-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#geonamesBox">
		                                                                <i class="fa fa-search font-black" />
		                                                            </a>
		
		                                                        </div>
                                                    		</div>
                                                    	</div>
													
	                                                </div>
	                                            </div>
	                                        </div>
	                                    </div>
                                    </ui:repeat>
                                    <script type="text/javascript">
                                                 $('a[id*="rowIndexTrigger5-"]').on('click', function() {
                                                    var currIndex = $(this ).attr('data-row' );
                                                    $('#rowIndex' ).val(currIndex );
                                                    $('#rowType' ).val("country" );
                                                    $("#rowDataBtn").click();
                                                 } );
                                    </script>
                                    <h:commandLink tabindex="-1" title="#{msgs.addCountry}" action="#{AktuelleSchritteForm.myPlugin.data.addCountry}">
                                        <i class="fa fa-plus margin-right-10" />
                                        <h:outputText value="#{msgs.addCountry}" />
                                        <f:ajax execute="@form" render="@form" />
                                    </h:commandLink>
                                </div>
                            </div>



                            <div class="form-group">

                                <div class="col-sm-3 control-label">
                                    <label>#{msgs.state}</label>
                                </div>
                                <div class="col-sm-9 inner-form">

                                    <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.stateList}" var="state">
                                        <div class="form-inline">
                                            <div class="input-group" style="width: 100%; margin-bottom:6px;">

                                                <h:inputText value="#{state.value}" styleClass="form-control">
                                                    <f:ajax execute="@form" event="valueChange" />
                                                </h:inputText>
                                                <div class="input-group-addon" style="width:14px;padding-top: 4px;padding-bottom: 4px;">
                                                    <h:commandLink tabindex="-1" title="#{msgs.deleteState}" action="#{AktuelleSchritteForm.myPlugin.data.deleteState}">
                                                        <i class="fa fa-trash-o font-black" style="margin-left: 3px" />
                                                        <f:setPropertyActionListener value="#{state}" target="#{AktuelleSchritteForm.myPlugin.data.currentObject}" />
                                                        <f:ajax execute="@form" render="@form" />
                                                    </h:commandLink>
                                                </div>
                                            </div>

                                            <div class="clearfix"></div>
                                        </div>
                                    </x:dataList>

                                    <!--  add -->
                                    <h:commandLink tabindex="-1" title="#{msgs.addState}" action="#{AktuelleSchritteForm.myPlugin.data.addState}">
                                        <i class="fa fa-plus margin-right-10" />
                                        <h:outputText value="#{msgs.addState}" />
                                        <f:ajax execute="@form" render="@form" />
                                    </h:commandLink>
                                </div>
                            </div>


                            <div class="form-group" style="">
                                <div class="col-sm-3 control-label">
                                    <h:outputLabel for="schoolSubject" value="#{msgs.schoolSubject}" />
                                </div>
                                <div class="col-sm-9">
                                    <h:selectOneMenu id="schoolSubject" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.schoolSubject}">
                                        <f:ajax event="change" render="selection" />
                                        <f:selectItem itemValue="" itemLabel="#{msgs.bitteAuswaehlen}" />
                                        <f:selectItem itemValue="#{msgs.history}" itemLabel="#{msgs.history}" />
                                        <f:selectItem itemValue="#{msgs.geography}" itemLabel="#{msgs.geography}" />
                                        <f:selectItem itemValue="#{msgs.socialstudies}" itemLabel="#{msgs.socialstudies}" />
                                        <f:selectItem itemValue="#{msgs.other}" itemLabel="#{msgs.other}" />
                                    </h:selectOneMenu>
                                </div>
                            </div>

                            <div class="form-group" style="">
                                <div class="col-sm-3 control-label">
                                    <h:outputLabel for="educationLevel" value="#{msgs.educationLevel}" />
                                </div>
                                <div class="col-sm-9">
                                    <h:selectOneMenu id="educationLevel" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.educationLevel}">
                                        <f:ajax event="change" render="selection" />
                                        <f:selectItem itemValue="" itemLabel="#{msgs.bitteAuswaehlen}" />
                                        <f:selectItem itemValue="#{msgs.primary}" itemLabel="#{msgs.primary}" />
                                        <f:selectItem itemValue="#{msgs.secondary1}" itemLabel="#{msgs.secondary1}" />
                                        <f:selectItem itemValue="#{msgs.secondary2}" itemLabel="#{msgs.secondary2}" />
                                        <f:selectItem itemValue="#{msgs.tertiary}" itemLabel="#{msgs.tertiary}" />
                                        <f:selectItem itemValue="#{msgs.otherEducationLevel}" itemLabel="#{msgs.otherEducationLevel}" />
                                    </h:selectOneMenu>
                                </div>
                            </div>

                            <div class="form-group">

                                <div class="col-sm-3 control-label">
                                    <h:outputLabel value="#{msgs.language}" />
                                </div>
                                <div class="col-sm-9 inner-form">

                                    <ui:repeat value="#{AktuelleSchritteForm.myPlugin.data.languageList}" var="language" varStatus="row">
                                        <div class="form-inline">
                                            <div class="input-group" style="width: 100%;margin-bottom:6px;">
                                                <h:inputText value="#{language.value}" styleClass="form-control">
                                                    <f:ajax execute="@form" event="valueChange" />
                                                </h:inputText>

                                                <div class="input-group-addon" style="width:14px;padding-top: 4px;padding-bottom: 4px;">

                                                    <h:commandLink tabindex="-1" title="#{msgs.deleteLanguage}" action="#{AktuelleSchritteForm.myPlugin.data.deleteLanguage}" style="margin-right:5px;">
                                                        <i class="fa fa-trash-o font-black" style="margin-left: 3px" />
                                                        <f:setPropertyActionListener value="#{language}" target="#{AktuelleSchritteForm.myPlugin.data.currentObject}" />
                                                        <f:ajax execute="@form" render="@form" />
                                                    </h:commandLink>
                                                    
                                                    <a title="#{msgs.search}" href="#" id="languageTrigger-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#languageBox">
                                                    	<i class="fa fa-search font-black" />
                                                    </a>
                                                            
                                                </div>
                                            </div>

                                            <div class="clearfix"></div>
                                        </div>
                                    </ui:repeat>
                                    
                                    
                                    <script type="text/javascript">
                                                 $('a[id*="languageTrigger-"]').on('click', function() {
                                                    var currIndex = $(this ).attr('data-row' );
                                                    $('#rowIndex' ).val(currIndex );
                                                    $('#rowType' ).val("language" );
                                                    $("#rowDataBtn").click();
                                                 } );
                                    </script>

                                    <!--  add -->
                                    <h:commandLink tabindex="-1" title="#{msgs.addLanguage}" action="#{AktuelleSchritteForm.myPlugin.data.addLanguage}">
                                        <i class="fa fa-plus margin-right-10" />
                                        <h:outputText value="#{msgs.addLanguage}" />
                                        <f:ajax execute="@form" render="@form" />
                                    </h:commandLink>
                                </div>
                            </div>

                            <intranda:formInputText label="#{msgs.edition}" field="#{AktuelleSchritteForm.myPlugin.data.edition}" help="#{msgs._GEI_DESCRIPTION_edition}" name="edition" fieldStyle="form-control" required="false" />

                            <intranda:formInputText label="#{msgs.isbn}" field="#{AktuelleSchritteForm.myPlugin.data.isbn}" help="#{msgs._GEI_DESCRIPTION_isbn}" name="isbn" fieldStyle="form-control" required="false" />

                            <intranda:formInputText label="#{msgs.physicalLocation}" field="#{AktuelleSchritteForm.myPlugin.data.physicalLocation}" help="#{msgs._GEI_DESCRIPTION_physicalLocation}" name="physicalLocation" fieldStyle="form-control" required="false" />


                            <intranda:formInputText label="#{msgs.shelfmark}" field="#{AktuelleSchritteForm.myPlugin.data.shelfmark}" help="#{msgs._GEI_DESCRIPTION_SHELFMARK}" name="shelfmark" fieldStyle="form-control" required="false" />

                            <intranda:formInputText label="#{msgs.numberOfPages}" field="#{AktuelleSchritteForm.myPlugin.data.numberOfPages}" help="#{msgs._GEI_DESCRIPTION_NumberOfPages}" name="numberOfPages" fieldStyle="form-control" required="false" />


                        </div>
                    </div>
                </div>

            </h:panelGroup>


            <div class="row">

                <div class="form-actions">

                    <!-- Save -->
                    <h:commandLink styleClass="btn btn-success submitOnEnter pull-right margin-bottom-most font-size-s" id="absenden" action="#{AktuelleSchritteForm.myPlugin.save}" disabled="#{AktuelleSchritteForm.myPlugin.displayMode == 'category' || AktuelleSchritteForm.myPlugin.displayMode == 'keyword'}">
                        <i class="fa fa-save margin-right-5"></i>
                        <h:outputText value="#{msgs.speichern}" />
                    </h:commandLink>

                    <!-- Cancel -->
					<h:commandLink
						styleClass="btn margin-sides-10 pull-right font-size-s"
						action="#{AktuelleSchritteForm.myPlugin.cancel}"
						value="#{msgs.pluginLeave}"
						disabled="#{AktuelleSchritteForm.myPlugin.displayMode == 'category' || AktuelleSchritteForm.myPlugin.displayMode == 'keyword'}" />


                    </div>
            </div>



            <!-- Modal -->
            <div class="modal fade" id="searchBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <a href="#" class="btn btn-blue pull-right" title="#{msgs.cancel}" data-dismiss="modal">
                                <i class="fa fa-times"></i>
                            </a>

                            <h4 class="modal-title" id="myModalLabel">
                                <h:outputText value="#{msgs.NORM_gndSearch}" />
                            </h4>
                        </div>
                        <div class="modal-body">

                            <h:outputText value="#{msgs.NORM_helpGndSearch}" escape="false" />

                            <br />

                            <div class="row" style="margin-top: 15px;">
                                <div class="col-sm-4 control-label">
                                    <h:selectOneMenu id="searchOptionSelect" value="#{AktuelleSchritteForm.myPlugin.searchOption}" styleClass="form-control">
                                        <f:selectItem itemLabel="#{msgs.NORM_identifier}" itemValue="" />
                                        <f:selectItem itemLabel="#{msgs.NORM_person}" itemValue="Tp*" />
                                        <f:selectItem itemLabel="#{msgs.NORM_organisation}" itemValue="Tb*" />
                                        <f:selectItem itemLabel="#{msgs.NORM_keyword}" itemValue="Ts*" />
                                        <f:selectItem itemLabel="#{msgs.NORM_geografika}" itemValue="Tg*" />
                                    </h:selectOneMenu>
                                </div>

                                <div class="col-sm-8">
                                    <x:inputText value="#{AktuelleSchritteForm.myPlugin.searchValue}" styleClass="form-control input" id="input" >
                                        <f:ajax event="change" />
                                    </x:inputText>
                                </div>

                                <h:commandLink styleClass="btn btn-grey pull-right margin-right-10 margin-top-10 margin-bottom-10" action="#{AktuelleSchritteForm.myPlugin.search}" title="#{msgs.search}">
                                    <i class="fa fa-search margin-right-5"></i>
                                    <h:outputText value="#{msgs.search}" />
                                    <f:ajax execute="searchOptionSelect" render="list" onevent="displayNormdataAjaxLoader"/>
                                </h:commandLink>

                                <script>
                                $('input[id*="input"]' ).on('focus', function() {
                                    $(this ).on('keyup', function(event ) {
                                        event.preventDefault();
                                        if ( event.keyCode == 13 ) {
                                            $(this ).parent().next().click();
                                        }
                                     } );
                                 } );
                                
                                function displayNormdataAjaxLoader(data) {
                                	switch (data.status) {                                	
                                		case "begin": // Before the ajax request is sent.
                                			$("#ajaxloader_normdatasearch").show();
                                			$("#list").hide();
                                    		break;
                               			 case "complete": // After the ajax response is arrived.
                               				$("#ajaxloader_normdatasearch").hide();
                                    		break;
                               			 case "success": // After update of HTML DOM based on ajax response..
                               				$("#list").show();
                                   			break;
                                	}
                                	
                                }
                                 </script>
                            </div>

							<div id="ajaxloader_normdatasearch" class="ajaxloader">
                            	<img src="template/img/goobi/ajaxloader2.gif" />
                            </div>
                            <h:panelGroup layout="block" id="list" class="row pre-scrollable">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.dataList}" var="normdataList">
                                    <hr />
                                    <div class="row" style="margin: 20px;">


                                        <div class="col-sm-11">

                                            <x:dataList value="#{normdataList}" var="normdata">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <h:outputText value="#{msgs[normdata.key]}" />
                                                    </div>

                                                    <div class="col-sm-8">
                                                        <x:dataList value="#{normdata.values}" var="value">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <h:outputLink rendered="#{value.url != null}" target="_blank" value="#{value.url}">
                                                                        <h:outputText value="#{value.text}" />
                                                                        <h:outputText rendered="#{value.identifier != null}" value=" (#{value.identifier})" />
                                                                    </h:outputLink>

                                                                    <h:outputText value="#{value.text}" rendered="#{value.url == null}" />
                                                                </div>
                                                            </div>
                                                        </x:dataList>
                                                    </div>
                                                </div>
                                            </x:dataList>
                                        </div>
                                        <h:panelGroup layout="block" class="col-sm-1">
                                            <h:commandLink styleClass="btn btn-green margin-left-5" action="#{AktuelleSchritteForm.myPlugin.getData(normdataList)}">
                                                <i class="fa fa-check" />
                                                <f:ajax execute="inputFields" render="inputFields"></f:ajax>
                                                <f:passThroughAttribute name="data-dismiss" value="modal"></f:passThroughAttribute>
                                            </h:commandLink>
                                        </h:panelGroup>
                                    </div>
                                </x:dataList>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

            <!-- geonames modal -->
            <div class="modal fade" id="geonamesBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <a href="#" class="btn btn-blue pull-right" title="#{msgs.cancel}" data-dismiss="modal">
                                <i class="fa fa-times"></i>
                            </a>

                            <h4 class="modal-title" id="myModalLabel">
                                <h:outputText value="#{msgs.NORM_geonamesSearch}" />
                            </h4>
                        </div>
                        <div class="modal-body">

                            <h:outputText value="#{msgs.NORM_helpGeonamesSearch}" escape="false" />

                            <br />

                            <div class="row" style="margin-top: 15px;">


                                <div class="col-sm-12">
                                    <x:inputText value="#{AktuelleSchritteForm.myPlugin.gndSearchValue}" styleClass="form-control input" id="geonamesSearch" />
                                </div>


                                <h:commandLink styleClass="btn btn-grey pull-right margin-right-10 margin-top-10 margin-bottom-10" action="#{AktuelleSchritteForm.myPlugin.searchGeonames}" title="#{msgs.search}">
                                    <i class="fa fa-search margin-right-5"></i>
                                    <h:outputText value="#{msgs.search}" />
                                    <f:ajax execute="@form" render="geonamesList" />
                                </h:commandLink>

                                <script>
                                var currId = '#{id}';
                                    $('input[id*="geonamesSearch"]' ).on('focus', function() {
                                        $(this ).on('keyup', function( event ) {
                                        event.preventDefault();
                                        if ( event.keyCode == 13 ) {
                                            $(this ).parent().next().click();
                                        }
                                    } );
                                } );
                               </script>
                            </div>


                            <h:panelGroup id="geonamesList" layout="block" styleClass="row pre-scrollable">

                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.resultList}" var="geonames">
                                    <hr />
                                    <div class="row" style="margin: 20px;">


                                        <div class="col-sm-11">

                                            <div class="row">

                                                <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.geoNameId !=''}">
                                                    <h:outputText value="#{msgs.geoNameId}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.geoNameId !=''}">
                                                    <h:outputText value="#{geonames.geoNameId}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.name !=''}">
                                                    <h:outputText value="#{msgs.name}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.name !=''}">
                                                    <h:outputText value="#{geonames.name}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.alternateNames !=''}">
                                                    <h:outputText value="#{msgs.alternateNames}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.alternateNames !=''}">
                                                    <h:outputText value="#{geonames.alternateNames}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.countryName !=''}">
                                                    <h:outputText value="#{msgs.countryName}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.countryName !=''}">
                                                    <h:outputText value="#{msgs[geonames.countryName]}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.latitude !=''}">
                                                    <h:outputText value="#{msgs.latitude}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.latitude !=''}">
                                                    <h:outputText value="#{geonames.latitude}" />
                                                </h:panelGroup>
                                                <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.longitude !=''}">
                                                    <h:outputText value="#{msgs.longitude}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.longitude !=''}">
                                                    <h:outputText value="#{geonames.longitude}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.population !=''}">
                                                    <h:outputText value="#{msgs.population}" />
                                                </h:panelGroup>

                                                <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.population !=''}">
                                                    <h:outputText value="#{geonames.population}" />
                                                </h:panelGroup>
                                            </div>


                                        </div>
                                        <div class="col-sm-1">
                                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.getGeonamesData(geonames)}" styleClass="btn btn-green margin-left-5">
                                                <i class="fa fa-check" />
                                                <f:ajax execute="inputFields" render="inputFields"></f:ajax>
                                                <f:passThroughAttribute name="data-dismiss" value="modal"></f:passThroughAttribute>
                                            </h:commandLink>
                                        </div>
                                    </div>
                                </x:dataList>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>


            <!-- language modal -->
            <div class="modal fade" id="languageBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <a href="#" class="btn btn-blue pull-right" title="#{msgs.cancel}" data-dismiss="modal">
                                <i class="fa fa-times"></i>
                            </a>

                            <h4 class="modal-title" id="myModalLabel">
                                <h:outputText value="#{msgs.languageSearch}" />
                            </h4>
                        </div>
                        <div class="modal-body">

                            <h:outputText value="#{msgs.helpLanguageSearch}" escape="false" />

                            <br />

                            <div class="row" style="margin-top: 15px;">


                                <div class="col-sm-12">
                                    <x:inputText value="#{AktuelleSchritteForm.myPlugin.searchValue}" styleClass="form-control input" id="languageSearch" />
                                </div>


                                <h:commandLink styleClass="btn btn-grey pull-right margin-right-10 margin-top-10 margin-bottom-10" action="#{AktuelleSchritteForm.myPlugin.searchLanguage}" title="#{msgs.search}">
                                    <i class="fa fa-search margin-right-5"></i>
                                    <h:outputText value="#{msgs.search}" />
                                    <f:ajax execute="@form" render="languagesList" onevent="displayLanguageAjaxLoader"/>
                                </h:commandLink>

                                <script>
                                var currId = '#{id}';
                                    $('input[id*="languageSearch"]' ).on('focus', function() {
                                        $(this ).on('keyup', function( event ) {
                                        event.preventDefault();
                                        if ( event.keyCode == 13 ) {
                                            $(this ).parent().next().click();
                                        }
                                    } );
                                } );
                                    function displayLanguageAjaxLoader(data) {
                                    	switch (data.status) {                                	
                                    		case "begin": // Before the ajax request is sent.
                                    			$("#ajaxloader_languagesearch").show();
                                    			$("#languagesList").hide();
                                        		break;
                                   			 case "complete": // After the ajax response is arrived.
                                   				$("#ajaxloader_languagesearch").hide();
                                        		break;
                                   			 case "success": // After update of HTML DOM based on ajax response..
                                   				$("#languagesList").show();
                                       			break;
                                    	}
                                    	
                                    }
                                     </script>
                                </div>

    							<div id="ajaxloader_languagesearch" class="ajaxloader">
                                	<img src="template/img/goobi/ajaxloader2.gif" />
                                </div>
                            <h:panelGroup id="languagesList" layout="block" styleClass="row pre-scrollable">

                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.searchedLanguages}" var="language">
                                    <hr />
                                    <div class="row" style="margin: 20px;">


                                        <div class="col-sm-11">

                                            <div class="row">
                                                <div class="col-sm-12">
                                                        <h:outputText value="#{msgs.isoCode}:" styleClass="col-sm-6"/>
                                                        <h:outputText value="#{language.isoCode}" styleClass="col-sm-6"/>
                                                 </div>
                                                <div class="col-sm-12">
                                                    <h:outputText value="#{msgs.englishName}:" styleClass="col-sm-6"/>
                                                   	<h:outputText value="#{language.englishName}" styleClass="col-sm-6"/>
                                                </div>
                                                <div class="col-sm-12">
                                                    <h:outputText value="#{msgs.frenchName}:" styleClass="col-sm-6"/>
                                                	<h:outputText value="#{language.frenchName}" styleClass="col-sm-6"/>
                                                </div>
                                                <div class="col-sm-12">
                                                    <h:outputText value="#{msgs.germanName}:" styleClass="col-sm-6"/>
                                                    <h:outputText value="#{language.germanName}" styleClass="col-sm-6"/>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-sm-1">
                                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.getLanguageData(language)}" styleClass="btn btn-green margin-left-5">
                                                <i class="fa fa-check" />
                                                <f:ajax execute="inputFields" render="inputFields"></f:ajax>
                                                <f:passThroughAttribute name="data-dismiss" value="modal"></f:passThroughAttribute>
                                            </h:commandLink>
                                        </div>
                                    </div>
                                </x:dataList>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

        </h:form>

    </ui:define>

</ui:composition>