<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" template="template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:p="http://primefaces.org/ui" xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <ui:param name="myPageTitle" value="#{msgs.ResourceAnnotationTitle}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb label="#{msgs.startseite}" action="index" navId="a0" />
        <intranda:breadcrumb label="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
        <intranda:breadcrumb label="#{AktuelleSchritteForm.mySchritt.prozess.titel}" action="task_edit" />
        <intranda:breadcrumb label="#{myPageTitle}" noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <x:stylesheet media="screen" path="eurviews.css" />

        <h:form id="myform" styleClass="form-horizontal form-bordered">


            <div class="row">
                <div class="col-sm-12">
                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{myPageTitle}" />
                            </h3>
                            <ul class="tabs">
                                <li class="#{(NavigationForm.uiStatus.gei_annotation eq '' || NavigationForm.uiStatus.gei_annotation == null) ?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.additionalData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_annotation}" value="" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="#{NavigationForm.uiStatus.gei_annotation eq 'tab2'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.annotationData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_annotation}" value="tab2" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                            </ul>
                        </div>
                        <div class="box-content nopadding">
                            <h:panelGroup rendered="#{(NavigationForm.uiStatus.gei_annotation == '' || NavigationForm.uiStatus.gei_annotation == null)}">

                                <intranda:formInputDropDownAjax ajaxEvent="change" ajaxRender="@form" label="#{msgs.typeOfContribution}" field="#{AktuelleSchritteForm.myPlugin.contributionType}" help="#{msgs.help_GEI_ANNOTATION_CLASSIFICATION}" name="classification" selectItems="#{AktuelleSchritteForm.myPlugin.possibleClassifications}" required="true" var="classification" itemLabel="#{msgs[classification]}" itemValue="#{classification}" fieldStyle="form-control" />

                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.bookPerson}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">
                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.authorList}" var="author">

                                            <intranda:formInputText label="#{msgs.firstname}" field="#{author.firstName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_FIRSTNAME}" name="author" fieldStyle="form-control" required="false" />
                                            <intranda:formInputText label="#{msgs.lastname}" field="#{author.lastName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_LASTNAME}" name="lastname" fieldStyle="form-control" required="true" />
                                            <intranda:formInputDropDown label="#{msgs.role}" field="#{author.role}" help="#{msgs.help_GEI_DESCRIPTION_AUTHOR_ROLE}" name="role" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePersons}" required="false" fieldStyle="form-control" />

                                            <div class="form-group">
                                                <div class="col-sm-3 control-label">
                                                    <h:outputText value="#{msgs.mets_authority_data}" />
                                                </div>

                                                <div class="col-sm-9">
                                                    <div class="form-inline">
                                                        <div class="input-group halfwidth">
                                                            <h:selectOneMenu value="#{author.normdataAuthority}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                                <f:selectItem itemLabel="gnd" itemValue="gnd" />
                                                                <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
                                                            </h:selectOneMenu>
                                                        </div>
                                                        <div class="input-group halfwidth">
                                                            <h:inputText value="#{author.normdataValue}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                            </h:inputText>
                                                            <div class="input-group-addon">
                                                                <h:commandLink tabindex="-1" title="#{msgs.deletePerson}" action="#{AktuelleSchritteForm.myPlugin.deletePerson}">
                                                                    <i class="fa fa-trash-o" />
                                                                    <f:setPropertyActionListener value="#{author}" target="#{AktuelleSchritteForm.myPlugin.currentPerson}" />
                                                                    <f:ajax execute="@form" render="@form" />
                                                                </h:commandLink>
                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <hr />

                                        </x:dataList>


                                        <div id="duplicatebuttons">
                                            <!--  add -->
                                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addAuthor}" title="#{msgs.addAuthor}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addPerson}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>
                                        </div>
                                    </div>


                                </div>


                                <intranda:formInputText label="#{msgs.edition}" field="#{AktuelleSchritteForm.myPlugin.edition}" help="#{msgs.help_GEI_ANNOTATION_EDITION}" name="edition" required="false" fieldStyle="form-control" />
                                <intranda:formInputText label="#{msgs.publisher}" field="#{AktuelleSchritteForm.myPlugin.publisher}" help="#{msgs.help_GEI_ANNOTATION_PUBLISHER}" name="publisher" required="true" fieldStyle="form-control" />
                                <intranda:formInputText label="#{msgs.project}" field="#{AktuelleSchritteForm.myPlugin.project}" help="#{msgs.help_GEI_ANNOTATION_PROJECT}" name="publisher" required="true" fieldStyle="form-control" />
                                <intranda:formInputText label="#{msgs.availability}" field="#{AktuelleSchritteForm.myPlugin.availability}" help="#{msgs.help_GEI_ANNOTATION_AVAILIBILITY}" name="publisher" required="false" fieldStyle="form-control" />
                                <intranda:formInputDropDown label="#{msgs.licence}" field="#{AktuelleSchritteForm.myPlugin.licence}" help="#{msgs.help_GEI_DESCRIPTION_LICENCE}" name="role" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleLicences}" required="false" fieldStyle="form-control" />



                                <h:panelGroup styleClass="form-group" layout="block" rendered="#{AktuelleSchritteForm.myPlugin.contributionType != 'Bildungsgeschichte'}">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.sources}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">
                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.sourceList}" var="source">

                                            <div class="form-group">
                                                <div class="col-sm-3 control-label">
                                                    <h:outputLabel value="#{msgs.source}" for="itemTip" />
                                                </div>

                                                <div class="col-sm-9">
                                                    <div class="form-inline">
                                                        <div class="input-group" style="width: 100%;">

                                                            <p:autoComplete id="itemTip" value="#{source.data}" completeMethod="#{AktuelleSchritteForm.myPlugin.completeSource}" var="data" itemLabel="#{data.maintitleOriginal}" itemValue="#{data}" converter="BibliographicDataConverter" forceSelection="true">
                                                                <f:facet name="itemtip">
                                                                    <h:panelGrid columns="2" cellpadding="5">

                                                                        <h:outputLabel for="maintitleOriginal" value="#{msgs.maintitle}:" />
                                                                        <h:outputText value="#{data.maintitleOriginal}" id="maintitleOriginal" />

                                                                        <h:outputLabel for="subtitle" value="#{msgs.subtitle}:" />
                                                                        <h:outputText value="#{data.subtitleOriginal}" id="subtitle" />

                                                                        <h:outputLabel for="placeOfPublication" value="#{msgs.placeOfPublication}:" />
                                                                        <h:outputText value="#{data.placeOfPublication}" id="placeOfPublication" />

                                                                        <h:outputLabel for="publicationYear" value="#{msgs.publicationYear}:" />
                                                                        <h:outputText value="#{data.publicationYear}" id="publicationYear" />

                                                                        <h:outputLabel for="shelfmark" value="#{msgs.shelfmark}:" />
                                                                        <h:outputText value="#{data.shelfmark}" id="shelfmark" />

                                                                    </h:panelGrid>
                                                                </f:facet>
                                                            </p:autoComplete>
                                                            <div class="input-group-addon">
                                                                <h:commandLink action="#{AktuelleSchritteForm.myPlugin.deleteSource}" style="float: right">
                                                                    <i class="fa fa-trash-o" />
                                                                    <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentSource}" value="#{source}" />
                                                                </h:commandLink>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <intranda:formInputCheckBox label="#{msgs.mainsource}" field="#{source.mainSource}" help="#{msgs.help_GEI_ANNOTTATION_MAINSOURCE}" name="mainsource" />

                                            <hr />

                                        </x:dataList>


                                        <div id="duplicatebuttons">
                                            <!--  add -->
                                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addSource}" title="#{msgs.addSource}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addSource}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>

                                        </div>
                                    </div>
                                </h:panelGroup>
                            </h:panelGroup>



                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_annotation == 'tab2'}">
                               
                               
Titel   1,1 Der Titel des Beitrages.    Freitextfeld        
Übersetzer  0,* Falls der Text übersetzt wurde, dann wird hier der Übersetzer in freier Form eingetragen.   Freitextfeld        Ein weiteres Feld kann mit einem Pluszeichen erzeugt und mit einem Mülleimerzeichen entfernt werden.
Sprache 1,1 Die Sprache des Beitragstexts.  Drop-Down-Liste     Gibt es standardisierte Listen, die hier eingebunden werden können?Bei Abby-OCR-Daten automatischer Eintrag der Sprache.
Abstract    0,1 Kurzer Abstract zum Beitrag.    einfacher RT-Editor     standardmäßig ausgeblendet                   
Inhalt  1,1 Der Text des Beitrags   einfacher RT-Editor     
Anmerkungen 0,1 Anmerkungen zum Beitrag.    einfacher RT-Editor     Anmerkungen können später in verschiedenen Varianten formatiert werden, also als Fußnoten, Endnoten, Randnotizen etc.
Literaturangaben    0,1 Literaturangaben zum Beitrag.   einfacher RT-Editor     
Themenfelder / Schlagwörter 1,* Themenfelder mit zugeordneten Schlagworten mit denen der Quellenauszug kontextualisiert wird.   ein Tab pro ThemenfeldSchlagworte können markiert werden    Im Fall von Essays und Kommentaren sollen alle Schlagworte aus den referenzierten Quellen hier vorausgewählt sein! Bildungsgeschichten "erben" nichts.  Entspricht den Themenfeldern/Schlagwörtern im Reiter "Kontext" im Modul "Quellenbeschreibung".

                               
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="form-actions">

                    <!-- Save -->
                    <h:commandLink styleClass="btn btn-success submitOnEnter pull-right margin-bottom-most font-size-s" id="absenden" action="#{AktuelleSchritteForm.myPlugin.save}">
                        <i class="fa fa-save margin-right-5"></i>
                        <h:outputText value="#{msgs.speichern}" />
                    </h:commandLink>

                    <!-- Cancel -->

                    <h:commandLink styleClass="btn margin-sides-10 pull-right font-size-s" action="#{AktuelleSchritteForm.myPlugin.cancel}" value="#{msgs.abbrechen}" />
                </div>


            </div>

        </h:form>

    </ui:define>

</ui:composition>