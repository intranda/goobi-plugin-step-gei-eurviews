<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" template="template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:p="http://primefaces.org/ui" xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <ui:param name="myPageTitle" value="#{msgs.ResourceAnnotationTitle}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb label="#{msgs.startseite}" action="index" navId="a0" />
        <intranda:breadcrumb label="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
        <intranda:breadcrumb label="#{AktuelleSchritteForm.mySchritt.prozess.titel}" action="task_edit" />
        <intranda:breadcrumb label="#{myPageTitle}" noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <x:stylesheet media="screen" path="eurviews.css" />

        <h:form id="myform" styleClass="form-horizontal form-bordered">


            <div class="row">
                <div class="col-sm-12">
                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{myPageTitle}" />
                            </h3>
                            <ul class="tabs">
                                <li class="#{(NavigationForm.uiStatus.gei_annotation eq '' || NavigationForm.uiStatus.gei_annotation == null) ?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.authorData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_annotation}" value="" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="#{NavigationForm.uiStatus.gei_annotation eq 'tab2'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.descriptionData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_annotation}" value="tab2" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="#{NavigationForm.uiStatus.gei_annotation eq 'tab3'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.annotationData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_annotation}" value="tab3" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                            </ul>
                        </div>
                        <div class="box-content nopadding">
                            <h:panelGroup rendered="#{(NavigationForm.uiStatus.gei_annotation == '' || NavigationForm.uiStatus.gei_annotation == null)}">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.authorList}" var="author">

                                    <h:commandLink rendered="#{AktuelleSchritteForm.myPlugin.sizeOfAuthorList gt 1}" action="#{AktuelleSchritteForm.myPlugin.deleteAuthor}" style="float: right">
                                        <span class="btn margin-right-10 fa fa-trash-o fa-lg width-40" />
                                        <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentAuthor}" value="#{author}" />
                                    </h:commandLink>
                                    <intranda:formInputText label="#{msgs.name}" field="#{author.name}" help="#{msgs.help_GEI_ANNOTATION_NAME}" name="author-name" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.organization}" field="#{author.organization}" help="#{msgs.help_GEI_ANNOTATION_ORGANIZATION}" name="author-organization" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.mail}" field="#{author.mail}" help="#{msgs.help_GEI_ANNOTATION_MAIL}" name="author-mail" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.mail2}" field="#{author.mail2}" help="#{msgs.help_GEI_ANNOTATION_MAIL}" name="author-mail2" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.mail3}" field="#{author.mail3}" help="#{msgs.help_GEI_ANNOTATION_MAIL}" name="author-mail3" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.url}" field="#{author.url}" help="#{msgs.help_GEI_ANNOTATION_URL}" name="author-url" fieldStyle="form-control" required="false" />

                                    <hr />
                                </x:dataList>

                                <ul class="action-ul">
                                    <li class="action-li">
                                        <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addAuthor}" title="#{msgs.addAuthor}">
                                            <span class="btn margin-right-10 fa fa-plus fa-lg width-40" />
                                            <h:outputText value="#{msgs.addAuthor}" />
                                        </h:commandLink>
                                    </li>
                                </ul>


                            </h:panelGroup>



                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_annotation == 'tab2'}">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.sourceList}" var="source">

                                    <h:commandLink rendered="#{AktuelleSchritteForm.myPlugin.sizeOfSourceList gt 1}" action="#{AktuelleSchritteForm.myPlugin.deleteSource}" style="float: right">
                                        <span class="btn margin-right-10 fa fa-trash-o fa-lg width-40" />
                                        <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentSource}" value="#{source}" />
                                    </h:commandLink>

                                    <div class="form-group">
                                        <div class="col-sm-3 control-label">
                                            <h:outputLabel value="#{msgs.source}" for="itemTip" />
                                        </div>
                                        <div class="col-sm-9">
                                            <p:autoComplete id="itemTip" value="#{source.data}" completeMethod="#{AktuelleSchritteForm.myPlugin.completeSource}" var="data" itemLabel="#{data.maintitleOriginal}" itemValue="#{data}" converter="BibliographicDataConverter" forceSelection="true">
                                                <f:facet name="itemtip">
                                                    <h:panelGrid columns="2" cellpadding="5">

                                                        <h:outputLabel for="maintitleOriginal" value="#{msgs.maintitle}:" />
                                                        <h:outputText value="#{data.maintitleOriginal}" id="maintitleOriginal" />

                                                        <h:outputLabel for="subtitle" value="#{msgs.subtitle}:" />
                                                        <h:outputText value="#{data.subtitleOriginal}" id="subtitle" />

                                                        <h:outputLabel for="publisher" value="#{msgs.publisher}:" />
                                                        <h:outputText value="#{data.publisher}" id="publisher" />

                                                        <h:outputLabel for="placeOfPublication" value="#{msgs.placeOfPublication}:" />
                                                        <h:outputText value="#{data.placeOfPublicationOriginal}" id="placeOfPublication" />

                                                        <h:outputLabel for="publicationYear" value="#{msgs.publicationYear}:" />
                                                        <h:outputText value="#{data.publicationYear}" id="publicationYear" />

                                                        <h:outputLabel for="shelfmark" value="#{msgs.shelfmark}:" />
                                                        <h:outputText value="#{data.shelfmark}" id="shelfmark" />

                                                    </h:panelGrid>
                                                </f:facet>
                                            </p:autoComplete>
                                        </div>
                                    </div>

                                    <intranda:formInputCheckBox label="#{msgs.mainsource}" field="#{source.mainSource}" help="#{msgs.help_GEI_ANNOTTATION_MAINSOURCE}" name="mainsource" />
                                    <hr />
                                </x:dataList>


                                <ul class="action-ul">
                                    <li class="action-li">
                                        <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addSource}" title="#{msgs.addSource}">
                                            <span class="btn margin-right-10 fa fa-plus fa-lg width-40" />
                                            <h:outputText value="#{msgs.addSource}" />
                                        </h:commandLink>
                                    </li>
                                </ul>


                            </h:panelGroup>

                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_annotation == 'tab3'}">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.annotationList}" var="annotation">
                                    <h:commandLink rendered="#{AktuelleSchritteForm.myPlugin.sizeOfAnnotationList gt 1}" action="#{AktuelleSchritteForm.myPlugin.deleteAnnotation}" style="float: right">
                                        <span class="btn margin-right-10 fa fa-trash-o fa-lg width-40" />
                                        <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentAnnotation}" value="#{annotation}" />
                                    </h:commandLink>

                                    <intranda:formInputText label="#{msgs.annotationtitle}" field="#{annotation.title}" help="#{msgs.help_GEI_ANNOTATION_NAME}" name="annotationtitle" fieldStyle="form-control" required="false" />

                                    <intranda:formInputDropDown2 label="#{msgs.language}" field="#{annotation.language}" help="#{msgs.help_GEI_DESCRIPTION_LANGUAGE}" name="language" var="language" itemLabel="#{msgs[language]}" itemValue="#{language}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleLanguages}" required="false" fieldStyle="form-control" />
                                    <intranda:formInputDropDown2 label="#{msgs.classification}" field="#{annotation.classification}" help="#{msgs.help_GEI_ANNOTATION_CLASSIFICATION}" name="classification" value="#{AktuelleSchritteForm.myPlugin.possibleClassifications}" var="classification" itemLabel="#{msgs[classification]}" itemValue="#{classification}" required="false" fieldStyle="form-control" />
                                    <intranda:formInputTeiEditor name="content" label="#{msgs.content}" field="#{annotation.content}" fieldStyle="form-control" required="false" />


                                    <intranda:formInputText label="#{msgs.translator}" field="#{annotation.translator}" help="#{msgs.help_GEI_ANNOTATION_TRANSLATOR}" name="translator" fieldStyle="form-control" required="false" />
                                    <intranda:formInputTeiEditor name="footnote" label="#{msgs.footnote}" field="#{annotation.footnote}" fieldStyle="form-control" required="false" />
                                    <intranda:formInputTeiEditor name="reference" label="#{msgs.references}" field="#{annotation.reference}" fieldStyle="form-control" required="false" />

                                    <hr />
                                </x:dataList>

                                <ul class="action-ul">
                                    <li class="action-li">
                                        <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addAnnotation}">
                                            <span class="btn margin-right-10 fa fa-plus fa-lg width-40" />
                                            <h:outputText value="#{msgs.addAnnotation}" />
                                        </h:commandLink>
                                    </li>
                                </ul>

                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

        </h:form>

    </ui:define>

</ui:composition>