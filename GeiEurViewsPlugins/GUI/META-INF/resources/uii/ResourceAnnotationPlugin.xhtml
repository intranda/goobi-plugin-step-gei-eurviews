<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" template="template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:p="http://primefaces.org/ui" xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <ui:param name="myPageTitle" value="#{msgs.ResourceAnnotationTitle}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb label="#{msgs.startseite}" action="index" navId="a0" />
        <intranda:breadcrumb label="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
        <intranda:breadcrumb label="#{AktuelleSchritteForm.mySchritt.prozess.titel}" action="task_edit" />
        <intranda:breadcrumb label="#{myPageTitle}" noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <x:stylesheet media="screen" path="eurviews.css" />

        <h:form id="myform" styleClass="form-horizontal form-bordered" prependId="false">


            <div class="row">
                <div class="col-sm-12">
                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{myPageTitle}" />
                            </h3>
                            <div class="actions">
                                <h:commandLink styleClass="btn btn-mini" action="#{NavigationForm.Reload}" title="#{NavigationForm.uiStatus.gei_showDetails eq 'down'?msgs.showBoxDetailsOff:msgs.showBoxDetailsOn}">
                                    <i class="fa #{NavigationForm.uiStatus.gei_showDetails eq 'down'?'fa-angle-up':'fa-angle-down'}" />
                                    <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_showDetails}" value="#{NavigationForm.uiStatus.gei_showDetails eq 'down'?'up':'down'}" />
                                    <f:ajax render=":myform" execute=":myform" />
                                </h:commandLink>
                            </div>
                            <ul class="tabs">
                                <li class="#{(NavigationForm.uiStatus.gei_annotation eq '' || NavigationForm.uiStatus.gei_annotation == null) ?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.additionalData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_annotation}" value="" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="#{NavigationForm.uiStatus.gei_annotation eq 'tab2'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.annotationData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_annotation}" value="tab2" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                            </ul>
                        </div>
                        <div class="box-content nopadding">
                            <h:panelGroup rendered="#{(NavigationForm.uiStatus.gei_annotation == '' || NavigationForm.uiStatus.gei_annotation == null)}">

                                <intranda:formInputDropDownAjax ajaxEvent="change" ajaxRender="@form" label="#{msgs.typeOfContribution}" field="#{AktuelleSchritteForm.myPlugin.contributionType}" help="#{msgs.help_GEI_ANNOTATION_CLASSIFICATION}" name="classification" selectItems="#{AktuelleSchritteForm.myPlugin.possibleClassifications}" required="false" var="classification" itemLabel="#{msgs[classification]}" itemValue="#{classification}" fieldStyle="form-control" />

                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.Person}" />
                                    </div>
                                    <h:panelGroup layout="block" class="col-sm-9 inner-form" id="personList">

                                        <h:inputHidden id="rowIndex" value="#{AktuelleSchritteForm.myPlugin.index}" />
                                        <!--                                     <x:dataList var="author" value="#{AktuelleSchritteForm.myPlugin.authorList}" rowIndexVar="row.index"> -->
                                        <ui:repeat var="author" value="#{AktuelleSchritteForm.myPlugin.authorList}" varStatus="row">
                                            <!--                                     <c:forEach var="author" items="#{AktuelleSchritteForm.myPlugin.authorList}" varStatus="row"> -->
                                            <intranda:formInputText label="#{msgs.firstname}" field="#{author.firstName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_FIRSTNAME}" name="author" fieldStyle="form-control" required="false" />
                                            <intranda:formInputText label="#{msgs.lastname}" field="#{author.lastName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_LASTNAME}" name="lastname" fieldStyle="form-control" required="false" />
                                            <intranda:formInputDropDown label="#{msgs.role}" field="#{author.role}" help="#{msgs.help_GEI_DESCRIPTION_AUTHOR_ROLE}" name="role" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePersons}" required="false" fieldStyle="form-control" />


                                            <div class="form-group">
                                                <div class="col-sm-3 control-label">
                                                    <h:outputText value="#{msgs.mets_authority_data}" />
                                                </div>

                                                <div class="col-sm-9">
                                                    <div class="form-inline">
                                                        <div class="input-group halfwidth">
                                                            <h:selectOneMenu value="#{author.normdataAuthority}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                                <f:selectItem itemLabel="gnd" itemValue="gnd" />
                                                                <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
                                                            </h:selectOneMenu>
                                                        </div>
                                                        <div class="input-group halfwidth">
                                                            <h:inputText value="#{author.normdataValue}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                            </h:inputText>
                                                            <div class="input-group-addon">

                                                                <h:commandLink tabindex="-1" title="#{msgs.deletePerson}" action="#{AktuelleSchritteForm.myPlugin.deletePerson}">
                                                                    <i class="fa fa-trash-o" />
                                                                    <f:setPropertyActionListener value="#{author}" target="#{AktuelleSchritteForm.myPlugin.currentPerson}" />
                                                                    <f:ajax execute="@form" render="@form" />
                                                                </h:commandLink>

                                                                <a title="#{msgs.search}" href="#" id="rowIndexTrigger-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox">
                                                                    <i class="fa fa-search" />
                                                                </a>

                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <hr />
                                        </ui:repeat>


                                        <script type="text/javascript">
                                           $('a[id*="rowIndexTrigger-"]' ).on('click', function() {
                                               var currIndex = $( this ).attr('data-row' );                                                   
                                               $('#rowIndex' ).val(currIndex );
                                           } );
                                        </script>

                                        <h:panelGroup layout="block" id="duplicatebuttons">
                                            <!--  add -->
                                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addAuthor}" title="#{msgs.addAuthor}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addPerson}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>
                                        </h:panelGroup>
                                    </h:panelGroup>


                                </div>


                                <div style="display: #{NavigationForm.uiStatus.gei_showDetails!= 'down'?'none':'block'}">
                                    <intranda:formInputText label="#{msgs.edition}" field="#{AktuelleSchritteForm.myPlugin.edition}" help="#{msgs.help_GEI_ANNOTATION_EDITION}" name="edition" required="false" fieldStyle="form-control" />
                                    <intranda:formInputText label="#{msgs.publisher}" field="#{AktuelleSchritteForm.myPlugin.publisher}" help="#{msgs.help_GEI_ANNOTATION_PUBLISHER}" name="publisher" required="false" fieldStyle="form-control" />
                                    <intranda:formInputText label="#{msgs.project}" field="#{AktuelleSchritteForm.myPlugin.project}" help="#{msgs.help_GEI_ANNOTATION_PROJECT}" name="publisher" required="false" fieldStyle="form-control" />
                                    <intranda:formInputText label="#{msgs.availability}" field="#{AktuelleSchritteForm.myPlugin.availability}" help="#{msgs.help_GEI_ANNOTATION_AVAILIBILITY}" name="publisher" required="false" fieldStyle="form-control" />
                                    <intranda:formInputDropDown label="#{msgs.licence}" field="#{AktuelleSchritteForm.myPlugin.licence}" help="#{msgs.help_GEI_DESCRIPTION_LICENCE}" name="role" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleLicences}" required="false" fieldStyle="form-control" />
                                </div>

                                <h:panelGroup styleClass="form-group" layout="block" rendered="#{AktuelleSchritteForm.myPlugin.contributionType != 'Bildungsgeschichte'}">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.sources}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">
                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.sourceList}" var="source">

                                            <div class="form-group">
                                                <div class="col-sm-3 control-label">
                                                    <h:outputLabel value="#{msgs.source}" for="itemTip" />
                                                </div>

                                                <div class="col-sm-9">
                                                    <div class="form-inline">
                                                        <div class="input-group" style="width: 100%;">

                                                            <p:autoComplete id="itemTip" value="#{source.data}" completeMethod="#{AktuelleSchritteForm.myPlugin.completeSource}" var="data" itemLabel="#{data.maintitleOriginal}" itemValue="#{data}" converter="BibliographicDataConverter" forceSelection="true">
                                                                <f:facet name="itemtip">
                                                                    <h:panelGrid columns="2" cellpadding="5">

                                                                        <h:outputLabel for="maintitleOriginal" value="#{msgs.maintitle}:" />
                                                                        <h:outputText value="#{data.maintitleOriginal}" id="maintitleOriginal" />

                                                                        <h:outputLabel for="subtitle" value="#{msgs.subtitle}:" />
                                                                        <h:outputText value="#{data.subtitleOriginal}" id="subtitle" />

                                                                        <h:outputLabel for="placeOfPublication" value="#{msgs.placeOfPublication}:" />
                                                                        <h:outputText value="#{data.placeOfPublication.name}" id="placeOfPublication" />

                                                                        <h:outputLabel for="publicationYear" value="#{msgs.publicationYear}:" />
                                                                        <h:outputText value="#{data.publicationYear}" id="publicationYear" />

                                                                        <h:outputLabel for="shelfmark" value="#{msgs.shelfmark}:" />
                                                                        <h:outputText value="#{data.shelfmark}" id="shelfmark" />

                                                                    </h:panelGrid>
                                                                </f:facet>
                                                            </p:autoComplete>
                                                            <div class="input-group-addon">
                                                                <h:commandLink action="#{AktuelleSchritteForm.myPlugin.deleteSource}" style="float: right">
                                                                    <i class="fa fa-trash-o" />
                                                                    <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentSource}" value="#{source}" />
                                                                </h:commandLink>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <intranda:formInputCheckBox label="#{msgs.mainsource}" field="#{source.mainSource}" help="#{msgs.help_GEI_ANNOTTATION_MAINSOURCE}" name="mainsource" />

                                            <hr />

                                        </x:dataList>


                                        <div id="duplicatebuttons">
                                            <!--  add -->
                                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addSource}" title="#{msgs.addSource}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addSource}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>

                                        </div>
                                    </div>
                                </h:panelGroup>
                            </h:panelGroup>



                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_annotation == 'tab2'}">
                                <div class="row">
                                    <div class="col-sm-6">

                                        <intranda:formInputText label="#{msgs.annotationtitle}" field="#{AktuelleSchritteForm.myPlugin.contribution.titleOriginal}" help="#{msgs.help_GEI_TITLE}" name="title" required="false" fieldStyle="form-control" />

                                        <div class="form-group">
                                            <div class="col-sm-3 control-label">
                                                <h:outputText value="#{msgs.translator}" />
                                            </div>
                                            <div class="col-sm-9 inner-form">

                                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.contribution.translatorListOriginal}" var="translator">

                                                    <div class="form-inline">
                                                        <div class="input-group " style="width: 100%">

                                                            <h:inputText value="#{translator.value}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                            </h:inputText>
                                                            <div class="input-group-addon">
                                                                <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deleteTranslator}" action="#{AktuelleSchritteForm.myPlugin.contribution.deleteTranslatorOriginal}">
                                                                    <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                                    <f:setPropertyActionListener value="#{translator}" target="#{AktuelleSchritteForm.myPlugin.contribution.currentObject}" />
                                                                    <f:ajax execute="@form" render="@form" />
                                                                </h:commandLink>
                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </x:dataList>

                                                <!--  add -->
                                                <h:commandLink tabindex="-1" title="#{msgs.addTranslator}" action="#{AktuelleSchritteForm.myPlugin.contribution.addTranslatorOriginal}">
                                                    <i class="fa fa-plus margin-right-10" />
                                                    <h:outputText value="#{msgs.addTranslator}" />
                                                    <f:ajax execute="@form" render="@form" />
                                                </h:commandLink>
                                            </div>
                                        </div>

                                        <intranda:formInputDropDown label="#{msgs.language}" field="#{AktuelleSchritteForm.myPlugin.contribution.languageOriginal}" help="#{msgs.help_GEI_LANGUAGE}" name="language" var="lang" itemLabel="#{msgs[lang]}" itemValue="#{lang}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleLanguages}" required="false" fieldStyle="form-control" />
                                        <div style="display: #{NavigationForm.uiStatus.gei_showDetails eq 'up'?'none':'block'}">
                                            <intranda:formInputTeiEditor name="abstract" label="#{msgs.abstrakt}" field="#{AktuelleSchritteForm.myPlugin.contribution.abstractOriginal}" fieldStyle="form-control" required="false" />
                                        </div>
                                        <intranda:formInputTeiEditor name="content" label="#{msgs.content}" field="#{AktuelleSchritteForm.myPlugin.contribution.contentOriginal}" fieldStyle="form-control" required="false" />

                                        <intranda:formInputTeiEditor name="note" label="#{msgs.note}" field="#{AktuelleSchritteForm.myPlugin.contribution.noteOriginal}" fieldStyle="form-control" required="false" />

                                        <intranda:formInputTeiEditor name="reference" label="#{msgs.reference}" field="#{AktuelleSchritteForm.myPlugin.contribution.referenceOriginal}" fieldStyle="form-control" required="false" />
                                    </div>

                                    <div class="col-sm-6">

                                        <intranda:formInputText label="#{msgs.annotationtitle}" field="#{AktuelleSchritteForm.myPlugin.contribution.titleTranslation}" help="#{msgs.help_GEI_TITLE}" name="title2" required="false" fieldStyle="form-control" />

                                        <div class="form-group">
                                            <div class="col-sm-3 control-label">
                                                <h:outputText value="#{msgs.translator}" />
                                            </div>
                                            <div class="col-sm-9 inner-form">

                                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.contribution.translatorListTranslation}" var="translator2">

                                                    <div class="form-inline">
                                                        <div class="input-group " style="width: 100%">

                                                            <h:inputText value="#{translator2.value}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                            </h:inputText>
                                                            <div class="input-group-addon">
                                                                <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deleteTranslator}" action="#{AktuelleSchritteForm.myPlugin.contribution.deleteTranslatorTranslation}">
                                                                    <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                                    <f:setPropertyActionListener value="#{translator2}" target="#{AktuelleSchritteForm.myPlugin.contribution.currentObject}" />
                                                                    <f:ajax execute="@form" render="@form" />
                                                                </h:commandLink>
                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </x:dataList>

                                                <!--  add -->
                                                <h:commandLink tabindex="-1" title="#{msgs.addTranslator}" action="#{AktuelleSchritteForm.myPlugin.contribution.addTranslatorTranslation}">
                                                    <i class="fa fa-plus margin-right-10" />
                                                    <h:outputText value="#{msgs.addTranslator}" />
                                                    <f:ajax execute="@form" render="@form" />
                                                </h:commandLink>
                                            </div>
                                        </div>

                                        <intranda:formInputDropDown label="#{msgs.language}" field="#{AktuelleSchritteForm.myPlugin.contribution.languageTranslation}" help="#{msgs.help_GEI_LANGUAGE}" name="language2" var="lang" itemLabel="#{msgs[lang]}" itemValue="#{lang}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleLanguages}" required="false" fieldStyle="form-control" />
                                        <div style="display: #{NavigationForm.uiStatus.gei_showDetails eq 'up'?'none':'block'}">
                                            <intranda:formInputTeiEditor name="abstract2" label="#{msgs.abstrakt}" field="#{AktuelleSchritteForm.myPlugin.contribution.abstractTranslation}" fieldStyle="form-control" required="false" />
                                        </div>
                                        <intranda:formInputTeiEditor name="content2" label="#{msgs.content}" field="#{AktuelleSchritteForm.myPlugin.contribution.contentTranslation}" fieldStyle="form-control" required="false" />

                                        <intranda:formInputTeiEditor name="note2" label="#{msgs.note}" field="#{AktuelleSchritteForm.myPlugin.contribution.noteTranslation}" fieldStyle="form-control" required="false" />

                                        <intranda:formInputTeiEditor name="reference2" label="#{msgs.reference}" field="#{AktuelleSchritteForm.myPlugin.contribution.referenceTranslation}" fieldStyle="form-control" required="false" />


                                    </div>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

            <h:panelGroup layout="block" rendered="#{NavigationForm.uiStatus.gei_annotation == 'tab2'}" class="row" id="topicarea">
                <div class="popup"></div>

                <div class="col-sm-12">
                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{msgs.topics}" />
                            </h3>

                            <ul class="tabs">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.topicList}" var="topic">
                                    <li class="#{NavigationForm.uiStatus.gei_topic == topic.nameDE ?'active':''}">
                                        <h:commandLink action="#{NavigationForm.Reload}" value="#{topic.name}">
                                            <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_topic}" value="#{topic.nameDE}" />
                                            <f:ajax render="topicarea" execute=":myform" />
                                        </h:commandLink>
                                    </li>

                                </x:dataList>

                            </ul>
                        </div>


                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.topicList}" var="topic">
                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_topic == topic.nameDE}" styleClass="box-content nopadding " layout="block">


                                <x:dataList value="#{topic.keywordList}" var="keyword">

                                    <h:commandLink styleClass="margin-left-5 margin-top-5 margin-right-5 btn margin-bottom-5 #{keyword.selected ? 'btn-success' : ''}">
                                        <h:outputText value="#{keyword.keywordName}" />

                                        <f:passThroughAttribute name="data-trigger" value="hover" />
                                        <f:passThroughAttribute name="data-container" value=".popup" />
                                        <f:passThroughAttribute name="data-toggle" value="popover" />
                                        <f:passThroughAttribute name="data-placement" value="right" />
                                        <f:passThroughAttribute name="data-html" value="true" />
                                        <f:passThroughAttribute name="data-content" value="&lt;ul class=&quot;metseditorpopup-ul&quot;&gt; 
                                                                            #{keyword.gndId != null ? ('&lt;li&gt;').concat(msgs.gnd).concat(': &lt;&#47;li&gt; &lt;li&gt;').concat(keyword.gndId).concat('&lt;&#47;li&gt;'):''}
                                                                            #{keyword.wvId != null ? ('&lt;li&gt;').concat(msgs.wvid).concat(': &lt;&#47;li&gt; &lt;li&gt;').concat(keyword.wvId).concat('&lt;&#47;li&gt;'):''}
                                                                            #{keyword.synonymList != null and keyword.synonymList ne ''? ('&lt;li&gt;').concat(msgs.synonym).concat(': &lt;&#47;li&gt; &lt;li&gt;').concat(keyword.synonymList).concat('&lt;&#47;li&gt;'):''}
                                                                            &lt;&#47;ul&gt;" />


                                        <f:ajax execute="@form" render="@this" />
                                        <f:setPropertyActionListener value="#{!keyword.selected}" target="#{keyword.selected}" />
                                    </h:commandLink>
                                </x:dataList>
                            </h:panelGroup>
                        </x:dataList>
                    </div>
                </div>

            </h:panelGroup>


            <div class="row">

                <div class="form-actions">

                    <!-- Save -->
                    <h:commandLink styleClass="btn btn-success submitOnEnter pull-right margin-bottom-most font-size-s" id="absenden" action="#{AktuelleSchritteForm.myPlugin.save}">
                        <i class="fa fa-save margin-right-5"></i>
                        <h:outputText value="#{msgs.speichern}" />
                    </h:commandLink>

                    <!-- Cancel -->

                    <h:commandLink styleClass="btn margin-sides-10 pull-right font-size-s" action="#{AktuelleSchritteForm.myPlugin.cancel}" value="#{msgs.abbrechen}" />
                </div>


            </div>


            <!-- Modal -->
            <div class="modal fade" id="searchBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <a href="#" class="btn btn-blue pull-right" title="#{msgs.cancel}" data-dismiss="modal">
                                <i class="fa fa-times"></i>
                            </a>

                            <h4 class="modal-title" id="myModalLabel">
                                <h:outputText value="#{msgs.gndSearch}" />
                            </h4>
                        </div>
                        <div class="modal-body">

                            <h:outputText value="#{msgs.helpGndSearch}" escape="false" />

                            <br />

                            <div class="row" style="margin-top: 15px;">
                                <div class="col-sm-4 control-label">
                                    <h:selectOneMenu value="#{AktuelleSchritteForm.myPlugin.searchOption}" styleClass="form-control">
                                        <f:selectItem itemLabel="#{msgs.identifier}" itemValue="" />
                                        <f:selectItem itemLabel="#{msgs.person}" itemValue="Tp*" />
                                        <f:selectItem itemLabel="#{msgs.organisation}" itemValue="Tb*" />
                                        <f:selectItem itemLabel="#{msgs.keyword}" itemValue="Ts*" />
                                        <f:selectItem itemLabel="#{msgs.geografika}" itemValue="Tg*" />
                                    </h:selectOneMenu>
                                </div>

                                <div class="col-sm-8">
                                    <!-- search button? -->
                                    <x:inputText value="#{AktuelleSchritteForm.myPlugin.searchValue}" styleClass="form-control input" id="input" />
                                </div>


                                <h:commandLink styleClass="btn btn-grey pull-right margin-right-10 margin-top-10 margin-bottom-10" action="#{AktuelleSchritteForm.myPlugin.search}" title="#{msgs.search}">
                                    <i class="fa fa-search margin-right-5"></i>
                                    <h:outputText value="#{msgs.search}" />
                                    <f:ajax execute="@form" render="list" />
                                </h:commandLink>

                                <script>
                                        $('input[id*="input"]').on('focus',function() {
                                           $( this ).on('keyup',function(event ) {  
                                               event.preventDefault();
                                           	   if ( event.keyCode == 13 ) {
                                           	       $(this ).parent().next().click();
                                           	   }
                                           	} );
                                        } );
                                </script>
                            </div>


                            <h:panelGroup layout="block" id="list" class="row pre-scrollable">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.dataList}" var="normdataList">
                                    <hr />
                                    <div class="row" style="margin: 20px;">


                                        <div class="col-sm-11">

                                            <x:dataList value="#{normdataList}" var="normdata">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <h:outputText value="#{msgs[normdata.key]}" />
                                                    </div>

                                                    <div class="col-sm-8">
                                                        <x:dataList value="#{normdata.values}" var="value">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <h:outputLink rendered="#{value.url != null}" target="_blank" value="#{value.url}">
                                                                        <h:outputText value="#{value.text}" />
                                                                        <h:outputText rendered="#{value.identifier != null}" value=" (#{value.identifier})" />
                                                                    </h:outputLink>

                                                                    <h:outputText value="#{value.text}" rendered="#{value.url == null}" />
                                                                </div>
                                                            </div>
                                                        </x:dataList>
                                                    </div>
                                                </div>
                                            </x:dataList>
                                        </div>
                                        <h:panelGroup layout="block" class="col-sm-1">
                                            <h:commandLink styleClass="btn btn-green margin-left-5" action="#{AktuelleSchritteForm.myPlugin.getData(normdataList)}">
                                                <i class="fa fa-check" />
                                            </h:commandLink>
                                        </h:panelGroup>
                                    </div>
                                </x:dataList>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

        </h:form>

    </ui:define>

</ui:composition>