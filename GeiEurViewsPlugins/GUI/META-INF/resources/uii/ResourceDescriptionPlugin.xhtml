<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" xmlns:c="http://java.sun.com/jsp/jstl/core" template="template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <ui:param name="myPageTitle" value="#{msgs.ResourceDescriptionTitle}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb label="#{msgs.startseite}" action="index" navId="a0" />
        <intranda:breadcrumb label="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
        <intranda:breadcrumb label="#{AktuelleSchritteForm.mySchritt.prozess.titel}" action="task_edit" />
        <intranda:breadcrumb label="#{myPageTitle}" noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <x:stylesheet media="screen" path="eurviews.css" />

        <h:form id="myform" styleClass="form-horizontal form-bordered" prependId="false">

            <div class="row">

                <div class="#{NavigationForm.uiStatus.gei_imagearea == 'hide' ? 'col-sm-12' : 'col-sm-7'}">
                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{myPageTitle}" />
                            </h3>
                            <ul class="tabs">
                                <li class="#{(NavigationForm.uiStatus.gei_description eq '' || NavigationForm.uiStatus.gei_description == null) ?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.bibliographicData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_description}" value="" />
                                        <f:setPropertyActionListener value="" target="#{NavigationForm.uiStatus.gei_imagearea}" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>


                                <li class="#{NavigationForm.uiStatus.gei_description eq 'tab2'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.bibliographicData2}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_description}" value="tab2" />
                                        <f:setPropertyActionListener value="" target="#{NavigationForm.uiStatus.gei_imagearea}" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>


                                <li class="#{NavigationForm.uiStatus.gei_description eq 'tab3'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.imageData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_description}" value="tab3" />
                                        <f:setPropertyActionListener value="hide" target="#{NavigationForm.uiStatus.gei_imagearea}" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="#{NavigationForm.uiStatus.gei_description eq 'tab4'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.indexingData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_description}" value="tab4" />
                                        <f:setPropertyActionListener value="hide" target="#{NavigationForm.uiStatus.gei_imagearea}" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="#{NavigationForm.uiStatus.gei_description eq 'tab5'?'active':''}">
                                    <h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.transcriptionData}">
                                        <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_description}" value="tab5" />
                                        <f:setPropertyActionListener value="" target="#{NavigationForm.uiStatus.gei_imagearea}" />
                                        <f:ajax render=":myform" execute=":myform" />
                                    </h:commandLink>
                                </li>
                            </ul>
                        </div>
                        <div class="box-content nopadding">
                            <h:panelGroup rendered="#{(NavigationForm.uiStatus.gei_description == '' || NavigationForm.uiStatus.gei_description == null)}">

                                <intranda:formInputText label="#{msgs.maintitleOriginal}" field="#{AktuelleSchritteForm.myPlugin.data.maintitleOriginal}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="maintitleOriginal" fieldStyle="form-control" required="false" />
                                <intranda:formInputText label="#{msgs.subtitleOriginal}" field="#{AktuelleSchritteForm.myPlugin.data.subtitleOriginal}" help="#{msgs._GEI_DESCRIPTION_SUBTITLE}" name="subtitleOriginal" fieldStyle="form-control" required="false" />
                                <intranda:formInputText label="#{msgs.maintitleGerman}" field="#{AktuelleSchritteForm.myPlugin.data.maintitleGerman}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="maintitleGerman" fieldStyle="form-control" required="false" />
                                <intranda:formInputText label="#{msgs.maintitleEnglish}" field="#{AktuelleSchritteForm.myPlugin.data.maintitleEnglish}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="maintitleEnglish" fieldStyle="form-control" required="false" />

                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.bookPerson}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">
                                        <h:inputHidden id="rowIndex" value="#{AktuelleSchritteForm.myPlugin.index}" />
                                        <h:inputHidden id="rowType" value="#{AktuelleSchritteForm.myPlugin.rowType}" />
                                        <ui:repeat var="author" value="#{AktuelleSchritteForm.myPlugin.data.personList}" varStatus="row">

                                            <intranda:formInputText label="#{msgs.firstname}" field="#{author.firstName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_FIRSTNAME}" name="author" fieldStyle="form-control" required="false" />
                                            <intranda:formInputText label="#{msgs.lastname}" field="#{author.lastName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_LASTNAME}" name="lastname" fieldStyle="form-control" required="false" />
                                            <intranda:formInputDropDown label="#{msgs.role}" field="#{author.role}" help="#{msgs.help_GEI_DESCRIPTION_AUTHOR_ROLE}" name="role" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePersons}" required="false" fieldStyle="form-control" />

                                            <div class="form-group">
                                                <div class="col-sm-3 control-label">
                                                    <h:outputText value="#{msgs.mets_authority_data}" />
                                                </div>

                                                <div class="col-sm-9">
                                                    <div class="form-inline">
                                                        <div class="input-group halfwidth">
                                                            <h:selectOneMenu value="#{author.normdataAuthority}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                                <f:selectItem itemLabel="gnd" itemValue="gnd" />
                                                                <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
                                                            </h:selectOneMenu>
                                                        </div>
                                                        <div class="input-group halfwidth">
                                                            <h:inputText value="#{author.normdataValue}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                            </h:inputText>
                                                            <div class="input-group-addon">
                                                                <h:commandLink tabindex="-1" title="#{msgs.deletePerson}" action="#{AktuelleSchritteForm.myPlugin.data.deleteBookAuthor}">
                                                                    <i class="fa fa-trash-o" />
                                                                    <f:setPropertyActionListener value="#{author}" target="#{AktuelleSchritteForm.myPlugin.data.currentPerson}" />
                                                                    <f:ajax execute="@form" render="@form" />
                                                                </h:commandLink>

                                                                <a title="#{msgs.search}" href="#" id="rowIndexTrigger-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox">
                                                                    <i class="fa fa-search" />
                                                                </a>

                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <hr />

                                        </ui:repeat>
                                        <script type="text/javascript">
                                                                                                                                                                    $(
                                                                                                                                                                            'a[id*="rowIndexTrigger-"]' )
                                                                                                                                                                            .on(
                                                                                                                                                                                    'click',
                                                                                                                                                                                    function() {
                                                                                                                                                                                        var currIndex = $(
                                                                                                                                                                                                this )
                                                                                                                                                                                                .attr(
                                                                                                                                                                                                        'data-row' );
                                                                                                                                                                                        $(
                                                                                                                                                                                                '#rowIndex' )
                                                                                                                                                                                                .val(
                                                                                                                                                                                                        currIndex );
                                                                                                                                                                                        $(
                                                                                                                                                                                                '#rowType' )
                                                                                                                                                                                                .val(
                                                                                                                                                                                                        "bookPerson" );
                                                                                                                                                                                    } );
                                                                                                                                                                </script>
                                        <div id="duplicatebuttons">
                                            <!--  add -->
                                            <h:commandLink tabindex="-1" title="#{msgs.addPerson}" action="#{AktuelleSchritteForm.myPlugin.data.addNewBookAuthor}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addPerson}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>
                                        </div>
                                    </div>


                                </div>

                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.placeOfPublication}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">

                                        <intranda:formInputText label="#{msgs.name}" field="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.name}" help="#{msgs._GEI_DESCRIPTION_PLACE}" name="placeOfPublicationGerman" fieldStyle="form-control" required="false" />
                                        <div class="form-group">
                                            <div class="col-sm-3 control-label">
                                                <h:outputText value="#{msgs.mets_authority_data}" />
                                            </div>

                                            <div class="col-sm-9">
                                                <div class="form-inline">
                                                    <div class="input-group halfwidth">
                                                        <h:selectOneMenu value="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.normdataAuthority}" styleClass="form-control">
                                                            <f:ajax execute="@form" event="valueChange" />
                                                            <f:selectItem itemLabel="geonames" itemValue="geonames" />
                                                        </h:selectOneMenu>
                                                    </div>
                                                    <div class="input-group halfwidth">
                                                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.normdataValue}" styleClass="form-control">
                                                            <f:ajax execute="@form" event="valueChange" />
                                                        </h:inputText>
                                                        <div class="input-group-addon">

                                                            <a title="#{msgs.search}" href="#" data-toggle="modal" data-row="1" data-target="#searchBox_geonames">
                                                                <i class="fa fa-search" />
                                                            </a>

                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <!-- geonames modal -->
                                    <div class="modal fade" id="searchBox_geonames" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <a href="#" class="btn btn-blue pull-right" title="#{msgs.cancel}" data-dismiss="modal">
                                                        <i class="fa fa-times"></i>
                                                    </a>

                                                    <h4 class="modal-title" id="myModalLabel">
                                                        <h:outputText value="#{msgs.geonamesSearch}" />
                                                    </h4>
                                                </div>
                                                <div class="modal-body">

                                                    <h:outputText value="#{msgs.helpGeonamesSearch}" escape="false" />

                                                    <br />

                                                    <div class="row" style="margin-top: 15px;">


                                                        <div class="col-sm-12">
                                                            <!-- search button? -->
                                                            <x:inputText value="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.searchValue}" styleClass="form-control input" id="search_geonames" />
                                                        </div>


                                                        <h:commandLink styleClass="btn btn-grey pull-right margin-right-10 margin-top-10 margin-bottom-10" action="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.search}" title="#{msgs.search}">
                                                            <i class="fa fa-search margin-right-5"></i>
                                                            <h:outputText value="#{msgs.search}" />
                                                            <f:ajax execute="@form" render="list_geonames" />
                                                        </h:commandLink>

                                                        <script>
                                                                                                                                                                                                                                    var currId = '#{id}';
                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                    $(
                                                                                                                                                                                                                                            'input[id*="search_geonames"]' )
                                                                                                                                                                                                                                            .on(
                                                                                                                                                                                                                                                    'focus',
                                                                                                                                                                                                                                                    function() {
                                                                                                                                                                                                                                                        $(
                                                                                                                                                                                                                                                                this )
                                                                                                                                                                                                                                                                .on(
                                                                                                                                                                                                                                                                        'keyup',
                                                                                                                                                                                                                                                                        function(
                                                                                                                                                                                                                                                                                event ) {
                                                                                                                                                                                                                                                                            event
                                                                                                                                                                                                                                                                                    .preventDefault();
                                                                                                                                                                                                                                                                            if ( event.keyCode == 13 ) {
                                                                                                                                                                                                                                                                                $(
                                                                                                                                                                                                                                                                                        this )
                                                                                                                                                                                                                                                                                        .parent()
                                                                                                                                                                                                                                                                                        .next()
                                                                                                                                                                                                                                                                                        .click();
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        } );
                                                                                                                                                                                                                                                    } );
                                                                                                                                                                                                                                </script>
                                                    </div>


                                                    <h:panelGroup id="list_geonames" layout="block" styleClass="row pre-scrollable">

                                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.resultList}" var="geonames">
                                                            <hr />
                                                            <div class="row" style="margin: 20px;">


                                                                <div class="col-sm-11">

                                                                    <div class="row">

                                                                        <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.geoNameId !=''}">
                                                                            <h:outputText value="#{msgs.geoNameId}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.geoNameId !=''}">
                                                                            <h:outputText value="#{geonames.geoNameId}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.name !=''}">
                                                                            <h:outputText value="#{msgs.name}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.name !=''}">
                                                                            <h:outputText value="#{geonames.name}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.alternateNames !=''}">
                                                                            <h:outputText value="#{msgs.alternateNames}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.alternateNames !=''}">
                                                                            <h:outputText value="#{geonames.alternateNames}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.countryName !=''}">
                                                                            <h:outputText value="#{msgs.countryName}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.countryName !=''}">
                                                                            <h:outputText value="#{msgs[geonames.countryName]}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.latitude !=''}">
                                                                            <h:outputText value="#{msgs.latitude}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.latitude !=''}">
                                                                            <h:outputText value="#{geonames.latitude}" />
                                                                        </h:panelGroup>
                                                                        <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.longitude !=''}">
                                                                            <h:outputText value="#{msgs.longitude}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.longitude !=''}">
                                                                            <h:outputText value="#{geonames.longitude}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-4" rendered="#{geonames.population !=''}">
                                                                            <h:outputText value="#{msgs.population}" />
                                                                        </h:panelGroup>

                                                                        <h:panelGroup layout="block" styleClass="col-sm-8" rendered="#{geonames.population !=''}">
                                                                            <h:outputText value="#{geonames.population}" />
                                                                        </h:panelGroup>
                                                                    </div>


                                                                </div>
                                                                <div class="col-sm-1">
                                                                    <h:commandLink action="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.getData}" styleClass="btn btn-green margin-left-5">
                                                                        <f:setPropertyActionListener value="#{geonames}" target="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication.currentToponym}"></f:setPropertyActionListener>
                                                                        <i class="fa fa-check" />
                                                                    </h:commandLink>
                                                                </div>
                                                            </div>
                                                        </x:dataList>
                                                    </h:panelGroup>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>


                                <intranda:formInputText label="#{msgs.publicationYear}" field="#{AktuelleSchritteForm.myPlugin.data.publicationYear}" help="#{msgs._GEI_DESCRIPTION_YEAR}" name="publicationYear" fieldStyle="form-control" required="false" />


                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.publisher}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">

                                        <ui:repeat var="publisher" value="#{AktuelleSchritteForm.myPlugin.data.publisherList}" varStatus="row">
                                            <!--                                         <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.publisherList}" var="publisher"> -->

                                            <intranda:formInputText label="#{msgs.name}" field="#{publisher.name}" help="#{msgs._GEI_DESCRIPTION_PUBLISHER}" name="publisher" fieldStyle="form-control" required="false" />
                                            <intranda:formInputDropDown label="#{msgs.role}" field="#{publisher.role}" help="#{msgs.help_GEI_DESCRIPTION_PUBLISHER_ROLE}" name="prole" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePublisher}" required="false" fieldStyle="form-control" />


                                            <div class="form-group">
                                                <div class="col-sm-3 control-label">
                                                    <h:outputText value="#{msgs.mets_authority_data}" />
                                                </div>

                                                <div class="col-sm-9">
                                                    <div class="form-inline">
                                                        <div class="input-group halfwidth">
                                                            <h:selectOneMenu value="#{publisher.normdataAuthority}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                                <f:selectItem itemLabel="gnd" itemValue="gnd" />
                                                                <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
                                                            </h:selectOneMenu>
                                                        </div>
                                                        <div class="input-group halfwidth">
                                                            <h:inputText value="#{publisher.normdataValue}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                            </h:inputText>
                                                            <div class="input-group-addon">
                                                                <!--  delete -->
                                                                <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deletePublisher}" action="#{AktuelleSchritteForm.myPlugin.data.deletePublisher}">
                                                                    <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                                    <f:setPropertyActionListener value="#{publisher}" target="#{AktuelleSchritteForm.myPlugin.data.currentPublisher}" />
                                                                    <f:ajax execute="@form" render="@form" />
                                                                </h:commandLink>
                                                                <!--                                                                 <a title="#{msgs.search}" href="#" data-toggle="modal" data-target="#searchBoxPublisher_#{row.index}"> -->
                                                                <!--                                                                     <i class="fa fa-search" /> -->
                                                                <!--                                                                 </a> -->
                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <hr />


                                        </ui:repeat>


                                        <h:panelGroup layout="block" id="duplicatebuttons">
                                            <!--  add -->
                                            <h:commandLink tabindex="-1" title="#{msgs.addPublisher}" action="#{AktuelleSchritteForm.myPlugin.data.addNewPublisher}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addPublisher}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>
                                        </h:panelGroup>
                                    </div>


                                </div>


                                <h:panelGroup rendered="#{AktuelleSchritteForm.myPlugin.data.documentType == 'multivolume'}">
                                    <intranda:formInputText label="#{msgs.volumeMaintitleOriginal}" field="#{AktuelleSchritteForm.myPlugin.data.volumeTitleOriginal}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeTitleOriginal" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.volumeMaintitleGerman}" field="#{AktuelleSchritteForm.myPlugin.data.volumeTitleGerman}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeTitleGerman" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.volumeMaintitleEnglish}" field="#{AktuelleSchritteForm.myPlugin.data.volumeTitleEnglish}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeTitleEnglish" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.volumeNumber}" field="#{AktuelleSchritteForm.myPlugin.data.volumeNumber}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="volumeNumber" fieldStyle="form-control" required="false" />


                                    <div class="form-group">

                                        <div class="col-sm-3 control-label">
                                            <h:outputText value="#{msgs.volumePerson}" />
                                        </div>
                                        <div class="col-sm-9 inner-form">
                                            <ui:repeat var="vauthor" value="#{AktuelleSchritteForm.myPlugin.data.volumePersonList}" varStatus="row">

                                                <!--                                             <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.volumePersonList}" var="vauthor"> -->


                                                <intranda:formInputText label="#{msgs.firstname}" field="#{vauthor.firstName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_FIRSTNAME}" name="author" fieldStyle="form-control" required="false" />
                                                <intranda:formInputText label="#{msgs.lastname}" field="#{vauthor.lastName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_LASTNAME}" name="lastname" fieldStyle="form-control" required="false" />
                                                <intranda:formInputDropDown label="#{msgs.role}" field="#{vauthor.role}" help="#{msgs.help_GEI_DESCRIPTION_AUTHOR_ROLE}" name="role" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePersons}" required="false" fieldStyle="form-control" />

                                                <div class="form-group">
                                                    <div class="col-sm-3 control-label">
                                                        <h:outputText value="#{msgs.mets_authority_data}" />
                                                    </div>

                                                    <div class="col-sm-9">
                                                        <div class="form-inline">
                                                            <div class="input-group halfwidth">
                                                                <h:selectOneMenu value="#{vauthor.normdataAuthority}" styleClass="form-control">
                                                                    <f:ajax execute="@form" event="valueChange" />
                                                                    <f:selectItem itemLabel="gnd" itemValue="gnd" />
                                                                    <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
                                                                </h:selectOneMenu>
                                                            </div>
                                                            <div class="input-group halfwidth">
                                                                <h:inputText value="#{vauthor.normdataValue}" styleClass="form-control">
                                                                    <f:ajax execute="@form" event="valueChange" />
                                                                </h:inputText>
                                                                <div class="input-group-addon">
                                                                    <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deletePerson}" action="#{AktuelleSchritteForm.myPlugin.data.deleteVolumeAuthor}">
                                                                        <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                                        <f:setPropertyActionListener value="#{vauthor}" target="#{AktuelleSchritteForm.myPlugin.data.currentPerson}" />
                                                                        <f:ajax execute="@form" render="@form" />
                                                                    </h:commandLink>
                                                                    <!--                                                                     <a title="#{msgs.search}" href="#" id="rowIndexTrigger1-#{row.index}" data-toggle="modal" data-row="#{row.index}" data-target="#searchBox"> -->
                                                                    <!--                                                                     <i class="fa fa-search" /> -->
                                                                    <!--                                                                 </a> -->
                                                                </div>
                                                            </div>

                                                            <div class="clearfix"></div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <hr />

                                            </ui:repeat>
                                            <script type="text/javascript">
                                                                                                                                                                                    $(
                                                                                                                                                                                            'a[id*="rowIndexTrigger1-"]' )
                                                                                                                                                                                            .on(
                                                                                                                                                                                                    'click',
                                                                                                                                                                                                    function() {
                                                                                                                                                                                                        var currIndex = $(
                                                                                                                                                                                                                this )
                                                                                                                                                                                                                .attr(
                                                                                                                                                                                                                        'data-row' );
                                                                                                                                                                                                        $(
                                                                                                                                                                                                                '#rowIndex' )
                                                                                                                                                                                                                .val(
                                                                                                                                                                                                                        currIndex );
                                                                                                                                                                                                        $(
                                                                                                                                                                                                                '#rowType' )
                                                                                                                                                                                                                .val(
                                                                                                                                                                                                                        "volumePerson" );
                                                                                                                                                                                                    } );
                                                                                                                                                                                </script>
                                            <div>
                                                <h:commandLink tabindex="-1" title="#{msgs.addPerson}" action="#{AktuelleSchritteForm.myPlugin.data.addNewVolumeAuthor}">
                                                    <i class="fa fa-plus margin-right-10" />
                                                    <h:outputText value="#{msgs.addPerson}" />
                                                    <f:ajax execute="@form" render="@form" />
                                                </h:commandLink>
                                            </div>
                                        </div>
                                    </div>

                                </h:panelGroup>

                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.country}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">

                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.countryList}" var="country">

                                            <div class="form-inline">
                                                <div class="input-group " style="width: 100%">

                                                    <h:inputText value="#{country.value}" styleClass="form-control">
                                                        <f:ajax execute="@form" event="valueChange" />
                                                    </h:inputText>
                                                    <div class="input-group-addon">
                                                        <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deleteCountry}" action="#{AktuelleSchritteForm.myPlugin.data.deleteCountry}">
                                                            <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                            <f:setPropertyActionListener value="#{country}" target="#{AktuelleSchritteForm.myPlugin.data.currentObject}" />
                                                            <f:ajax execute="@form" render="@form" />
                                                        </h:commandLink>
                                                    </div>
                                                </div>

                                                <div class="clearfix"></div>
                                            </div>
                                        </x:dataList>

                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addCountry}" action="#{AktuelleSchritteForm.myPlugin.data.addCountry}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addCountry}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </div>
                                </div>



                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.state}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">

                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.stateList}" var="state">
                                            <div class="form-inline">
                                                <div class="input-group" style="width: 100%">


                                                    <h:inputText value="#{state.value}" styleClass="form-control">
                                                        <f:ajax execute="@form" event="valueChange" />
                                                    </h:inputText>
                                                    <div class="input-group-addon">
                                                        <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deleteState}" action="#{AktuelleSchritteForm.myPlugin.data.deleteState}">
                                                            <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                            <f:setPropertyActionListener value="#{state}" target="#{AktuelleSchritteForm.myPlugin.data.currentObject}" />
                                                            <f:ajax execute="@form" render="@form" />
                                                        </h:commandLink>
                                                    </div>
                                                </div>

                                                <div class="clearfix"></div>
                                            </div>
                                        </x:dataList>

                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addState}" action="#{AktuelleSchritteForm.myPlugin.data.addState}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addState}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </div>
                                </div>


                                <div class="form-group" style="">
                                    <div class="col-sm-3 control-label">
                                        <h:outputLabel for="schoolSubject" value="#{msgs.schoolSubject}" />
                                    </div>
                                    <div class="col-sm-9">
                                        <h:selectOneMenu id="schoolSubject" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.schoolSubject}">
                                            <f:ajax event="change" render="selection" />
                                            <f:selectItem itemValue="" itemLabel="#{msgs.bitteAuswaehlen}" />
                                            <f:selectItem itemValue="#{msgs.history}" itemLabel="#{msgs.history}" />
                                            <f:selectItem itemValue="#{msgs.geography}" itemLabel="#{msgs.geography}" />
                                            <f:selectItem itemValue="#{msgs.socialstudies}" itemLabel="#{msgs.socialstudies}" />
                                            <f:selectItem itemValue="#{msgs.other}" itemLabel="#{msgs.other}" />
                                        </h:selectOneMenu>
                                    </div>
                                </div>

                                <div class="form-group" style="">
                                    <div class="col-sm-3 control-label">
                                        <h:outputLabel for="educationLevel" value="#{msgs.educationLevel}" />
                                    </div>
                                    <div class="col-sm-9">
                                        <h:selectOneMenu id="educationLevel" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.educationLevel}">
                                            <f:ajax event="change" render="selection" />
                                            <f:selectItem itemValue="" itemLabel="#{msgs.bitteAuswaehlen}" />
                                            <f:selectItem itemValue="#{msgs.primary}" itemLabel="#{msgs.primary}" />
                                            <f:selectItem itemValue="#{msgs.secondary1}" itemLabel="#{msgs.secondary1}" />
                                            <f:selectItem itemValue="#{msgs.secondary2}" itemLabel="#{msgs.secondary2}" />
                                            <f:selectItem itemValue="#{msgs.tertiary}" itemLabel="#{msgs.tertiary}" />
                                            <f:selectItem itemValue="#{msgs.otherEducationLevel}" itemLabel="#{msgs.otherEducationLevel}" />
                                        </h:selectOneMenu>
                                    </div>
                                </div>

                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.language}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">

                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.languageList}" var="language">
                                            <div class="form-inline">
                                                <div class="input-group" style="width: 100%">
                                                    <h:inputText value="#{language.value}" styleClass="form-control">
                                                        <f:ajax execute="@form" event="valueChange" />
                                                    </h:inputText>
                                                    <div class="input-group-addon">
                                                        <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deleteLanguage}" action="#{AktuelleSchritteForm.myPlugin.data.deleteLanguage}">
                                                            <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                            <f:setPropertyActionListener value="#{language}" target="#{AktuelleSchritteForm.myPlugin.data.currentObject}" />
                                                            <f:ajax execute="@form" render="@form" />
                                                        </h:commandLink>
                                                    </div>
                                                </div>

                                                <div class="clearfix"></div>
                                            </div>
                                        </x:dataList>

                                        <!--  add -->
                                        <h:commandLink tabindex="-1" title="#{msgs.addLanguage}" action="#{AktuelleSchritteForm.myPlugin.data.addLanguage}">
                                            <i class="fa fa-plus margin-right-10" />
                                            <h:outputText value="#{msgs.addLanguage}" />
                                            <f:ajax execute="@form" render="@form" />
                                        </h:commandLink>
                                    </div>
                                </div>

                                <intranda:formInputText label="#{msgs.edition}" field="#{AktuelleSchritteForm.myPlugin.data.edition}" help="#{msgs._GEI_DESCRIPTION_edition}" name="edition" fieldStyle="form-control" required="false" />

                                <intranda:formInputText label="#{msgs.isbn}" field="#{AktuelleSchritteForm.myPlugin.data.isbn}" help="#{msgs._GEI_DESCRIPTION_isbn}" name="isbn" fieldStyle="form-control" required="false" />

                                <intranda:formInputText label="#{msgs.physicalLocation}" field="#{AktuelleSchritteForm.myPlugin.data.physicalLocation}" help="#{msgs._GEI_DESCRIPTION_physicalLocation}" name="physicalLocation" fieldStyle="form-control" required="false" />


                                <intranda:formInputText label="#{msgs.shelfmark}" field="#{AktuelleSchritteForm.myPlugin.data.shelfmark}" help="#{msgs._GEI_DESCRIPTION_SHELFMARK}" name="shelfmark" fieldStyle="form-control" required="false" />

                                <intranda:formInputText label="#{msgs.numberOfPages}" field="#{AktuelleSchritteForm.myPlugin.data.numberOfPages}" help="#{msgs._GEI_DESCRIPTION_NumberOfPages}" name="numberOfPages" fieldStyle="form-control" required="false" />

                            </h:panelGroup>

                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_description == 'tab2'}">

                                <intranda:formInputDropDown label="#{msgs.resourceType}" field="#{AktuelleSchritteForm.myPlugin.data.resourceType}" help="#{msgs.help_GEI_DESCRIPTION_RESOURCE_TYPE}" name="resourceType" var="docstruct" itemLabel="#{msgs[docstruct.label]}" itemValue="#{docstruct.value}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleTypes}" required="false" fieldStyle="form-control" />

                                <intranda:formInputText label="#{msgs.resourceTitleOriginal}" field="#{AktuelleSchritteForm.myPlugin.data.resourceTitleOriginal}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="resourceTitleOriginal" fieldStyle="form-control" required="false" />
                                <intranda:formInputText label="#{msgs.resourceTitleGerman}" field="#{AktuelleSchritteForm.myPlugin.data.resourceTitleGerman}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="resourceTitleGerman" fieldStyle="form-control" required="false" />
                                <intranda:formInputText label="#{msgs.resourceTitleEnglish}" field="#{AktuelleSchritteForm.myPlugin.data.resourceTitleEnglish}" help="#{msgs._GEI_DESCRIPTION_TITLE}" name="resourceTitleEnglish" fieldStyle="form-control" required="false" />

                                <div class="form-group">

                                    <div class="col-sm-3 control-label">
                                        <h:outputText value="#{msgs.person}" />
                                    </div>
                                    <div class="col-sm-9 inner-form">

                                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.data.resourceAuthorList}" var="author">


                                            <intranda:formInputText label="#{msgs.firstname}" field="#{author.firstName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_FIRSTNAME}" name="author" fieldStyle="form-control" required="false" />
                                            <intranda:formInputText label="#{msgs.lastname}" field="#{author.lastName}" help="#{msgs._GEI_DESCRIPTION_AUTHOR_LASTNAME}" name="lastname" fieldStyle="form-control" required="false" />
                                            <intranda:formInputDropDown label="#{msgs.role}" field="#{author.role}" help="#{msgs.help_GEI_DESCRIPTION_AUTHOR_ROLE}" name="role" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" selectItems="#{AktuelleSchritteForm.myPlugin.possiblePersons}" required="false" fieldStyle="form-control" />

                                            <div class="form-group">
                                                <div class="col-sm-3 control-label">
                                                    <h:outputText value="#{msgs.mets_authority_data}" />
                                                </div>

                                                <div class="col-sm-9">
                                                    <div class="form-inline">
                                                        <div class="input-group halfwidth">
                                                            <h:selectOneMenu value="#{author.normdataAuthority}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                                <f:selectItem itemLabel="gnd" itemValue="gnd" />
                                                                <f:selectItem itemLabel="edu.experts" itemValue="edu.experts" />
                                                            </h:selectOneMenu>
                                                        </div>
                                                        <div class="input-group halfwidth">
                                                            <h:inputText value="#{author.normdataValue}" styleClass="form-control">
                                                                <f:ajax execute="@form" event="valueChange" />
                                                            </h:inputText>
                                                            <div class="input-group-addon">
                                                                <!--  delete -->
                                                                <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deletePerson}" action="#{AktuelleSchritteForm.myPlugin.data.deleteResourceAuthor}">
                                                                    <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                                    <f:setPropertyActionListener value="#{author}" target="#{AktuelleSchritteForm.myPlugin.data.currentPerson}" />
                                                                    <f:ajax execute="@form" render="@form" />
                                                                </h:commandLink>
                                                            </div>
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <hr />

                                        </x:dataList>


                                        <div id="duplicatebuttons">
                                            <!--  add -->
                                            <h:commandLink tabindex="-1" title="#{msgs.addPerson}" action="#{AktuelleSchritteForm.myPlugin.data.addNewResourceAuthor}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addPerson}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>
                                        </div>
                                    </div>


                                </div>

                                <div class="form-group" style="">
                                    <div class="col-sm-3 control-label">
                                        <h:outputLabel for="imagearea" value="#{msgs.imageArea}" />
                                    </div>

                                    <div class="col-sm-9 inner-form">
                                        <div class="form-inline">
                                            <div class="form-group">
                                                <label for="imagearea">#{msgs.from}</label>
                                                <x:inputText id="imagearea" forceId="true" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.startPage}" required="false" />
                                            </div>
                                            <div class="form-group">
                                                <label for="imagearea2">#{msgs.to}</label>
                                                <x:inputText id="imagearea2" forceId="true" styleClass="form-control" value="#{AktuelleSchritteForm.myPlugin.data.endPage}" required="false" readonly="false" />
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <intranda:formInputText label="#{msgs.supplier}" field="#{AktuelleSchritteForm.myPlugin.data.supplier}" help="#{msgs._GEI_DESCRIPTION_SUPPLIER}" name="supplier" fieldStyle="form-control" required="false" />

                            </h:panelGroup>


                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_description == 'tab3'}">

                                <x:dataList var="image" value="#{AktuelleSchritteForm.myPlugin.currentImages}">
                                    <h:panelGrid id="thumb" styleClass="thumbnail" columns="1">
                                        <h:commandLink>
                                            <h:graphicImage value="#{image.imagename}" />
                                            <x:updateActionListener value="#{image.order -1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                        </h:commandLink>



                                        <h:panelGrid columns="2" width="100%" styleClass="form-group">
                                            <h:outputLabel for="structType" value="#{msgs.structType}:" styleClass="control-label" />
                                            <h:selectOneMenu value="#{image.structType}" id="structType" styleClass="form-control">
                                                <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possibleImageDocStructs}" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" />
                                                <f:ajax render="@this" execute="@form" event="valueChange" />
                                            </h:selectOneMenu>

                                            <h:outputLabel for="licence" value="#{msgs.licence}:" styleClass="control-label" />
                                            <x:inputText id="licence" value="#{image.licence}" styleClass="form-control" />
                                            <!--                                             <h:selectOneMenu value="#{image.licence}" id="licence" styleClass="form-control"> -->
                                            <!--                                                 <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possibleLicences}" itemLabel="#{msgs[licence]}" itemValue="#{licence}" var="licence" /> -->
                                            <!--                                                 <f:ajax render="@this" execute="@form" event="valueChange" /> -->
                                            <!--                                             </h:selectOneMenu> -->

                                            <h:outputLabel for="copyright" value="#{msgs.copyright}:" styleClass="control-label" />
                                            <x:inputText id="copyright" forceId="true" styleClass="form-control" value="#{image.copyright}" required="false" readonly="false" />

                                            <h:outputLabel for="resolution" value="#{msgs.resolution}:" styleClass="control-label" />
                                            <x:inputText id="resolution" forceId="true" styleClass="form-control" value="#{image.resolution}" required="false" readonly="false" />

                                            <h:outputLabel for="display" value="#{msgs.displayImage}:" styleClass="control-label" />
                                            <h:selectBooleanCheckbox value="#{image.displayImage}" id="display" styleClass="form-control ">
                                                <f:ajax render="@this" execute="@form" event="valueChange" />
                                            </h:selectBooleanCheckbox>

                                            <h:outputLabel for="representative" value="#{msgs.representative}:" styleClass="control-label" />
                                            <h:selectBooleanCheckbox value="#{image.representative}" id="representative" styleClass="form-control">
                                                <f:ajax render="@this" execute="@form" event="valueChange" />
                                            </h:selectBooleanCheckbox>

                                            <h:outputLabel for="placeholder" value="#{msgs.placeholder}:" styleClass="control-label" />
                                            <h:selectOneMenu value="#{image.placeholder}" id="placeholder" styleClass="form-control">
                                                <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possiblePlaceholder}" />
                                                <f:ajax render="@this" execute="@form" event="valueChange" />
                                            </h:selectOneMenu>

                                        </h:panelGrid>

                                    </h:panelGrid>

                                </x:dataList>
                            </h:panelGroup>

                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_description == 'tab4'}">



                                <div class="row">
                                    <x:dataList var="desc" value="#{AktuelleSchritteForm.myPlugin.descriptionList}">
                                        <div class="col-sm-6">
                                            <intranda:formInputDropDown2 label="#{msgs.language}" field="#{desc.language}" help="#{msgs.help_GEI_DESCRIPTION_DOCUMENT_LANGUAGE}" name="language" var="language" itemLabel="#{msgs[language]}" itemValue="#{language}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleLanguages}" required="false" fieldStyle="form-control" />
                                            <intranda:formInputTeiEditor name="bookInformation" label="#{msgs.bookInformation}" field="#{desc.bookInformation}" fieldStyle="form-control" required="false" />
                                            <intranda:formInputTeiEditor name="shortDescription" label="#{msgs.shortDescription}" field="#{desc.shortDescription}" fieldStyle="form-control" required="false" />
                                            <intranda:formInputTeiEditor name="longDescription" label="#{msgs.longDescription}" field="#{desc.longDescription}" fieldStyle="form-control" required="false" />

                                        </div>

                                    </x:dataList>
                                </div>


                            </h:panelGroup>


                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_description == 'tab5'}">
                                <ui:repeat var="trans" value="#{AktuelleSchritteForm.myPlugin.transcriptionList}">

                                    <h:commandLink rendered="#{AktuelleSchritteForm.myPlugin.sizeOfTranscriptionList gt 1}" action="#{AktuelleSchritteForm.myPlugin.deleteTranscription}" style="float: right">
                                        <span class="btn margin-right-10 fa fa-trash-o fa-lg width-40" />
                                        <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentTranscription}" value="#{trans}" />
                                    </h:commandLink>

                                    <intranda:formInputDropDown2 label="#{msgs.language}" field="#{trans.language}" help="#{msgs.help_GEI_DESCRIPTION_LANGUAGE}" name="language" var="language" itemLabel="#{msgs[language]}" itemValue="#{language}" selectItems="#{AktuelleSchritteForm.myPlugin.possibleLanguages}" required="false" fieldStyle="form-control" />

                                    <intranda:formInputTeiEditor name="transcription" label="#{msgs.transcription}" field="#{trans.transcription}" fieldStyle="form-control" required="false" />


                                    <intranda:formInputText label="#{msgs.publisher}" field="#{trans.publisher}" help="#{msgs._GEI_DESCRIPTION_PUBLISHER}" name="publisher" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.project}" field="#{trans.project}" help="#{msgs._GEI_DESCRIPTION_PROJECT}" name="project" fieldStyle="form-control" required="false" />


                                    <div class="form-group">

                                        <div class="col-sm-3 control-label">
                                            <h:outputText value="#{msgs.translator}" />
                                        </div>
                                        <div class="col-sm-9 inner-form">

                                            <x:dataList value="#{trans.translatorList}" var="translator">
                                                <div class="form-inline">
                                                    <div class="input-group" style="width: 100%">
                                                        <h:inputText value="#{translator.value}" styleClass="form-control">
                                                            <f:ajax execute="@form" event="valueChange" />
                                                        </h:inputText>
                                                        <div class="input-group-addon">
                                                            <h:commandLink styleClass="pull-right" tabindex="-1" title="#{msgs.deleteTranslator}" action="#{trans.deleteTranslator}">
                                                                <i class="fa fa-trash-o" style="margin-left: 3px" />
                                                                <f:setPropertyActionListener value="#{translator}" target="#{trans.currentObject}" />
                                                                <f:ajax execute="@form" render="@form" />
                                                            </h:commandLink>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"></div>
                                                </div>
                                            </x:dataList>

                                            <!--  add -->
                                            <h:commandLink tabindex="-1" title="#{msgs.addTranslator}" action="#{trans.addTranslator}">
                                                <i class="fa fa-plus margin-right-10" />
                                                <h:outputText value="#{msgs.addTranslator}" />
                                                <f:ajax execute="@form" render="@form" />
                                            </h:commandLink>
                                        </div>
                                    </div>



                                    <intranda:formInputText label="#{msgs.approval}" field="#{trans.approval}" help="#{msgs._GEI_DESCRIPTION_APPROVAL}" name="approval" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.availability}" field="#{trans.availability}" help="#{msgs._GEI_DESCRIPTION_AVAILABILITY}" name="availability" fieldStyle="form-control" required="false" />
                                    <intranda:formInputText label="#{msgs.licence}" field="#{trans.licence}" help="#{msgs._GEI_DESCRIPTION_LICENCE}" name="licence" fieldStyle="form-control" required="false" />

                                </ui:repeat>

                                <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addTranscription}">
                                    <span class="btn margin-right-10 fa fa-plus fa-lg width-40" />
                                    <h:outputText value="#{msgs.addTranscription}" />
                                </h:commandLink>
                            </h:panelGroup>

                        </div>
                    </div>
                </div>

                <h:panelGroup class="col-sm-5" rendered="#{NavigationForm.uiStatus.gei_imagearea != 'hide'}">

                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{msgs.imageNavigation}" />
                            </h3>

                        </div>
                        <div class="box-content nopadding">
                            <h:panelGroup styleClass="div-image" layout="block" style="width: 100%;">
                                <h:panelGroup layout="block" styleClass="center">

                                    <h:commandLink title="#{msgs.firstImage}" styleClass="image-navigation btn font-size-s margin-sides-10">
                                        <i class="fa fa-double-angle-left"></i>
                                        <x:updateActionListener value="0" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                    </h:commandLink>

                                    <h:commandLink title="#{msgs.previousImage}" styleClass="image-navigation btn font-size-s margin-sides-10">
                                        <i class="fa fa-angle-left"></i>
                                        <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.imageIndex - 1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                    </h:commandLink>

                                    <h:outputText value="#{AktuelleSchritteForm.myPlugin.imageIndex +1} / #{AktuelleSchritteForm.myPlugin.sizeOfImageList +1 }" />

                                    <h:commandLink title="#{msgs.nextImage}" styleClass="image-navigation btn font-size-s margin-sides-10">
                                        <i class="fa fa-angle-right"></i>
                                        <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.imageIndex + 1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                    </h:commandLink>

                                    <h:commandLink title="#{msgs.lastImage}" styleClass="image-navigation btn font-size-s margin-sides-10">
                                        <i class="fa fa-double-angle-right"></i>
                                        <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.sizeOfImageList}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                    </h:commandLink>

                                </h:panelGroup>

                                <h:graphicImage value="#{AktuelleSchritteForm.myPlugin.bild}" rendered="#{AktuelleSchritteForm.myPlugin.image != null}" width="100%" />
                            </h:panelGroup>

                        </div>
                    </div>
                </h:panelGroup>
            </div>

            <h:panelGroup layout="block" rendered="#{NavigationForm.uiStatus.gei_description == 'tab4'}" class="row" id="topicarea">
                <div class="popup"></div>

                <div class="col-sm-12">
                    <div class="box box-color box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-cog box-icon-fix"></i>
                                <h:outputText value="#{msgs.topics}" />
                            </h3>

                            <ul class="tabs">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.topicList}" var="topic">
                                    <li class="#{NavigationForm.uiStatus.gei_topic == topic.nameDE ?'active':''}">
                                        <!-- TODO display topics in selected language -->
                                        <h:commandLink action="#{NavigationForm.Reload}" value="#{topic.name}">
                                            <f:setPropertyActionListener target="#{NavigationForm.uiStatus.gei_topic}" value="#{topic.nameDE}" />
                                            <f:ajax render="topicarea" execute=":myform" />
                                        </h:commandLink>
                                    </li>

                                </x:dataList>

                            </ul>
                        </div>


                        <x:dataList value="#{AktuelleSchritteForm.myPlugin.topicList}" var="topic">
                            <h:panelGroup rendered="#{NavigationForm.uiStatus.gei_topic == topic.nameDE}" styleClass="box-content nopadding " layout="block">


                                <x:dataList value="#{topic.keywordList}" var="keyword">

                                    <h:commandLink styleClass="margin-left-5 margin-top-5 margin-right-5 btn margin-bottom-5 #{keyword.selected ? 'btn-success' : ''}">
                                        <h:outputText value="#{keyword.keywordName}" />

                                        <f:passThroughAttribute name="data-trigger" value="hover" />
                                        <f:passThroughAttribute name="data-container" value=".popup" />
                                        <f:passThroughAttribute name="data-toggle" value="popover" />
                                        <f:passThroughAttribute name="data-placement" value="right" />
                                        <f:passThroughAttribute name="data-html" value="true" />
                                        <f:passThroughAttribute name="data-content" value="&lt;ul class=&quot;metseditorpopup-ul&quot;&gt; 
                                                                            #{keyword.gndId != null ? ('&lt;li&gt;').concat(msgs.gnd).concat(': &lt;&#47;li&gt; &lt;li&gt;').concat(keyword.gndId).concat('&lt;&#47;li&gt;'):''}
                                                                            #{keyword.wvId != null ? ('&lt;li&gt;').concat(msgs.wvid).concat(': &lt;&#47;li&gt; &lt;li&gt;').concat(keyword.wvId).concat('&lt;&#47;li&gt;'):''}
                                                                            #{keyword.synonymList != null and keyword.synonymList ne ''? ('&lt;li&gt;').concat(msgs.synonym).concat(': &lt;&#47;li&gt; &lt;li&gt;').concat(keyword.synonymList).concat('&lt;&#47;li&gt;'):''}
                                                                            &lt;&#47;ul&gt;" />


                                        <f:ajax execute="@form" render="@this" />
                                        <f:setPropertyActionListener value="#{!keyword.selected}" target="#{keyword.selected}" />
                                    </h:commandLink>



                                </x:dataList>



                            </h:panelGroup>

                        </x:dataList>


                    </div>
                </div>

            </h:panelGroup>



            <div class="row">

                <div class="form-actions">

                    <!-- Save -->
                    <h:commandLink styleClass="btn btn-success submitOnEnter pull-right margin-bottom-most font-size-s" id="absenden" action="#{AktuelleSchritteForm.myPlugin.save}" disabled="#{AktuelleSchritteForm.myPlugin.displayMode == 'category' || AktuelleSchritteForm.myPlugin.displayMode == 'keyword'}">
                        <i class="fa fa-save margin-right-5"></i>
                        <h:outputText value="#{msgs.speichern}" />
                    </h:commandLink>

                    <!-- Cancel -->

                    <h:commandLink styleClass="btn margin-sides-10 pull-right font-size-s" action="#{AktuelleSchritteForm.myPlugin.cancel}" value="#{msgs.abbrechen}" disabled="#{AktuelleSchritteForm.myPlugin.displayMode == 'category' || AktuelleSchritteForm.myPlugin.displayMode == 'keyword'}" />
                </div>
            </div>



            <!-- Modal -->
            <div class="modal fade" id="searchBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <a href="#" class="btn btn-blue pull-right" title="#{msgs.cancel}" data-dismiss="modal">
                                <i class="fa fa-times"></i>
                            </a>

                            <h4 class="modal-title" id="myModalLabel">
                                <h:outputText value="#{msgs.gndSearch}" />
                            </h4>
                        </div>
                        <div class="modal-body">

                            <h:outputText value="#{msgs.helpGndSearch}" escape="false" />

                            <br />

                            <div class="row" style="margin-top: 15px;">
                                <div class="col-sm-4 control-label">
                                    <h:selectOneMenu value="#{AktuelleSchritteForm.myPlugin.searchOption}" styleClass="form-control">
                                        <f:selectItem itemLabel="#{msgs.identifier}" itemValue="" />
                                        <f:selectItem itemLabel="#{msgs.person}" itemValue="Tp*" />
                                        <f:selectItem itemLabel="#{msgs.organisation}" itemValue="Tb*" />
                                        <f:selectItem itemLabel="#{msgs.keyword}" itemValue="Ts*" />
                                        <f:selectItem itemLabel="#{msgs.geografika}" itemValue="Tg*" />
                                    </h:selectOneMenu>
                                </div>

                                <div class="col-sm-8">
                                    <!-- search button? -->
                                    <x:inputText value="#{AktuelleSchritteForm.myPlugin.searchValue}" styleClass="form-control input" id="input" />
                                </div>

                                <h:commandLink styleClass="btn btn-grey pull-right margin-right-10 margin-top-10 margin-bottom-10" action="#{AktuelleSchritteForm.myPlugin.search}" title="#{msgs.search}">
                                    <i class="fa fa-search margin-right-5"></i>
                                    <h:outputText value="#{msgs.search}" />
                                    <f:ajax execute="@form" render="list" />
                                </h:commandLink>

                                <script>
                                                                                                                                    $(
                                                                                                                                            'input[id*="input"]' )
                                                                                                                                            .on(
                                                                                                                                                    'focus',
                                                                                                                                                    function() {
                                                                                                                                                        $(
                                                                                                                                                                this )
                                                                                                                                                                .on(
                                                                                                                                                                        'keyup',
                                                                                                                                                                        function(
                                                                                                                                                                                event ) {
                                                                                                                                                                            event
                                                                                                                                                                                    .preventDefault();
                                                                                                                                                                            if ( event.keyCode == 13 ) {
                                                                                                                                                                                $(
                                                                                                                                                                                        this )
                                                                                                                                                                                        .parent()
                                                                                                                                                                                        .next()
                                                                                                                                                                                        .click();
                                                                                                                                                                            }
                                                                                                                                                                        } );
                                                                                                                                                    } );
                                                                                                                                </script>
                            </div>


                            <h:panelGroup layout="block" id="list" class="row pre-scrollable">
                                <x:dataList value="#{AktuelleSchritteForm.myPlugin.dataList}" var="normdataList">
                                    <hr />
                                    <div class="row" style="margin: 20px;">


                                        <div class="col-sm-11">

                                            <x:dataList value="#{normdataList}" var="normdata">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <h:outputText value="#{msgs[normdata.key]}" />
                                                    </div>

                                                    <div class="col-sm-8">
                                                        <x:dataList value="#{normdata.values}" var="value">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <h:outputLink rendered="#{value.url != null}" target="_blank" value="#{value.url}">
                                                                        <h:outputText value="#{value.text}" />
                                                                        <h:outputText rendered="#{value.identifier != null}" value=" (#{value.identifier})" />
                                                                    </h:outputLink>

                                                                    <h:outputText value="#{value.text}" rendered="#{value.url == null}" />
                                                                </div>
                                                            </div>
                                                        </x:dataList>
                                                    </div>
                                                </div>
                                            </x:dataList>
                                        </div>
                                        <h:panelGroup layout="block" class="col-sm-1">
                                            <h:commandLink styleClass="btn btn-green margin-left-5" action="#{AktuelleSchritteForm.myPlugin.getData(normdataList)}">
                                                <i class="fa fa-check" />
                                            </h:commandLink>
                                        </h:panelGroup>
                                    </div>
                                </x:dataList>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

        </h:form>
    </ui:define>
</ui:composition>