<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" template="/ui/eurviews.html" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites" xmlns:p="http://primefaces.org/ui" xmlns:if="http://java.sun.com/jsf/composite/intrandaFaces">


    <ui:define name="breadcrumb">
        <h:commandLink value="#{msgs.startseite}" action="index" />
        <f:verbatim> &#8250;&#8250; </f:verbatim>
        <h:commandLink value="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
        <f:verbatim> &#8250;&#8250; </f:verbatim>
        <h:outputText value="#{msgs.Resource}" />
    </ui:define>

    <ui:define name="title">
        <h3>
            <h:outputText value="#{msgs.ResourceDescriptionTitle}" />
        </h3>
    </ui:define>

    <ui:define name="content">


        <h:form id="annotationform">
            <x:panelTabbedPane serverSideTabSwitch="true" immediateTabChange="false" styleClass="tabbedPane" activeTabStyleClass="activeTab" inactiveTabStyleClass="inactiveTab" disabledTabStyleClass="disabledTab" activeSubStyleClass="activeSub" inactiveSubStyleClass="inactiveSub" tabContentStyleClass="tabContent">

                <x:panelTab label="#{msgs.bibliographicData}">
                    <h:panelGrid columns="2">

                        <h:outputLabel for="documentType" value="#{msgs.documentType}" />
                        <h:selectOneMenu value="#{AktuelleSchritteForm.myPlugin.data.documentType}" id="documentType">
                            <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possibleDocumentTypes}" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" />
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:selectOneMenu>

                        <h:outputLabel for="maintitle" value="#{msgs.maintitle}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.maintitle}" id="maintitle">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="subtitle" value="#{msgs.subtitle}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.subtitle}" id="subtitle">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="author" value="#{msgs.author}" />
                        <h:panelGroup>
                            <h:outputText value="#{msgs.firstname}" />
                            <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.authorFirstname}" id="author">
                                <f:ajax render="@this" execute="@form" event="valueChange" />
                            </h:inputText>
                            <h:outputText value="#{msgs.lastname}" />
                            <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.authorLastname}">
                                <f:ajax render="@this" execute="@form" event="valueChange" />
                            </h:inputText>
                        </h:panelGroup>


                        <h:outputLabel for="language" value="#{msgs.language}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.language}" id="language">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="publisher" value="#{msgs.publisher}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.publisher}" id="publisher">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="placeOfPublication" value="#{msgs.placeOfPublication}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.placeOfPublication}" id="placeOfPublication">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="publicationYear" value="#{msgs.publicationYear}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.publicationYear}" id="publicationYear">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="numberOfPages" value="#{msgs.numberOfPages}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.numberOfPages}" id="numberOfPages">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="shelfmark" value="#{msgs.shelfmark}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.shelfmark}" id="shelfmark">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>

                        <h:outputLabel for="copyright" value="#{msgs.copyright}" />
                        <h:inputText value="#{AktuelleSchritteForm.myPlugin.data.copyright}" id="copyright">
                            <f:ajax render="@this" execute="@form" event="valueChange" />
                        </h:inputText>
                    </h:panelGrid>
                </x:panelTab>

                <x:panelTab label="#{msgs.imageData}">

                    <ui:repeat var="image" value="#{AktuelleSchritteForm.myPlugin.currentImages}">
                        <h:panelGrid id="thumb" styleClass="thumbnail">
                            <h:commandLink>
                                <h:graphicImage value="#{image.imagename}" />
                                <x:updateActionListener value="#{image.order -1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                            </h:commandLink>
                            <h:panelGroup>
                                <h:outputLabel for="structType" value="#{msgs.structType}" />
                                <h:selectOneMenu value="#{image.structType}" id="structType">
                                    <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possibleImageDocStructs}" var="docstruct" itemLabel="#{msgs[docstruct]}" itemValue="#{docstruct}" />
                                    <f:ajax render="@this" execute="@form" event="valueChange" />
                                </h:selectOneMenu>
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputLabel for="licence" value="#{msgs.licence}" />

                                <h:selectOneMenu value="#{image.licence}" id="licence">
                                    <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possibleLicences}" />
                                    <f:ajax render="@this" execute="@form" event="valueChange" />
                                </h:selectOneMenu>
                            </h:panelGroup>

                            <h:panelGroup>

                                <h:outputLabel for="display" value="#{msgs.displayImage}" />
                                <h:selectBooleanCheckbox value="#{image.displayImage}" id="display">
                                    <f:ajax render="@this" execute="@form" event="valueChange" />
                                </h:selectBooleanCheckbox>
                                <h:outputLabel for="" value="" />

                            </h:panelGroup>
                            <h:panelGroup>

                                <h:outputLabel for="representative" value="#{msgs.representative}" />
                                <h:selectBooleanCheckbox value="#{image.representative}" id="representative">
                                    <f:ajax render="@this" execute="@form" event="valueChange" />
                                </h:selectBooleanCheckbox>
                            </h:panelGroup>


                        </h:panelGrid>

                    </ui:repeat>

                </x:panelTab>


                <x:panelTab label="#{msgs.indexingData}">
                    <ui:repeat var="desc" value="#{AktuelleSchritteForm.myPlugin.descriptionList}">

                        <h:panelGrid columns="2">

                            <h:outputLabel value="#{msgs.language}" for="language" />
                            <h:panelGroup>
                                <h:selectOneMenu value="#{desc.language}" id="language">
                                    <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possibleLanguages}" var="language" itemLabel="#{msgs[language]}" itemValue="#{language}" />
                                    <f:ajax render="@this" execute="@form" event="valueChange" />
                                </h:selectOneMenu>
                                <h:outputLabel value="#{msgs.originalLanguage}" for="originalLanguage" />
                                <h:selectBooleanCheckbox value="#{desc.originalLanguage}" id="originalLanguage" />

                                <h:commandLink rendered="#{AktuelleSchritteForm.myPlugin.sizeOfDescriptionList gt 1}" action="#{AktuelleSchritteForm.myPlugin.deleteDescription}" style="float: right">
                                    <h:graphicImage value="images/buttons/waste1a_20px.gif" />
                                    <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentDescription}" value="#{desc}" />
                                </h:commandLink>
                            </h:panelGroup>

                            <h:outputLabel value="#{msgs.descriptiontitle}" for="title" />
                            <h:inputText value="#{desc.title}" id="title">
                                <f:ajax render="@this" execute="@form" event="valueChange" />
                            </h:inputText>

                            <h:outputLabel value="#{msgs.shortDescription}" for="shortDescription" />
                            <p:editor value="#{desc.shortDescription}" id="shortDescription">
                            </p:editor>

                            <h:outputLabel value="#{msgs.longDescription}" for="longDescription" />
                            <p:editor value="#{desc.longDescription}" id="longDescription">
                            </p:editor>

                            <h:outputLabel value="#{msgs.category}" for="categories" />
                            <p:autoComplete id="categories" multiple="true" value="#{desc.categoryList}" completeMethod="#{AktuelleSchritteForm.myPlugin.completeCategory}" var="cat" itemLabel="#{cat}" itemValue="#{cat}" forceSelection="true">
                                <p:column>
                                    <h:outputText value="#{cat}" />
                                </p:column>
                            </p:autoComplete>

                            <h:outputLabel value="#{msgs.keyword}" for="keywords" />
                            <p:autoComplete id="keywords" multiple="true" value="#{desc.keywordList}" completeMethod="#{AktuelleSchritteForm.myPlugin.completeKeyword}" var="cat" itemLabel="#{cat}" itemValue="#{cat}" forceSelection="true">
                                <p:column>
                                    <h:outputText value="#{cat}" />
                                </p:column>
                            </p:autoComplete>

                        </h:panelGrid>
                        <hr />

                    </ui:repeat>
                    <h:commandLink action="#{AktuelleSchritteForm.myPlugin.addDescription}">
                        <h:graphicImage value="images/plus.png" />
                        <h:outputText value="#{msgs.addDescription}" />
                    </h:commandLink>
                </x:panelTab>

                <x:panelTab label="#{msgs.transcriptionData}">

                    <ui:repeat var="trans" value="#{AktuelleSchritteForm.myPlugin.transcriptionList}">

                        <h:panelGrid columns="2">

                            <h:outputLabel value="#{msgs.language}" for="language" />
                            <h:panelGroup>
                                <h:selectOneMenu value="#{trans.language}" id="language">
                                    <f:selectItems value="#{AktuelleSchritteForm.myPlugin.possibleLanguages}" var="language" itemLabel="#{msgs[language]}" itemValue="#{language}" />
                                    <f:ajax render="@this" execute="@form" event="valueChange" />
                                </h:selectOneMenu>

                                <h:commandLink rendered="#{AktuelleSchritteForm.myPlugin.sizeOfTranscriptionList gt 1}" action="#{AktuelleSchritteForm.myPlugin.deleteTranscription}" style="float: right">
                                    <h:graphicImage value="images/buttons/waste1a_20px.gif" />
                                    <x:updateActionListener property="#{AktuelleSchritteForm.myPlugin.currentTranscription}" value="#{trans}" />
                                </h:commandLink>
                            </h:panelGroup>


                            <h:outputLabel value="#{msgs.transcription}" for="transcription" />
                            <p:editor value="#{trans.transcription}" id="transcription">
                            </p:editor>

                            <h:outputLabel value="#{msgs.author}" for="author" />
                            <h:inputText id="author" value="#{trans.author}" />

                        </h:panelGrid>

                    </ui:repeat>

                    <h:commandButton action="#{AktuelleSchritteForm.myPlugin.addTranscription}">
                        <h:graphicImage value="images/plus.png" />
                        <h:outputText value="#{msgs.addTranscription}" />
                    </h:commandButton>

                </x:panelTab>

            </x:panelTabbedPane>


            <h:panelGroup styleClass="div-image" layout="block">
                <h:commandLink title="#{msgs.firstImage}" styleClass="image-navigation">
                    <h:graphicImage value="images/start.png" />
                    <x:updateActionListener value="0" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                </h:commandLink>

                <h:commandLink title="#{msgs.previousImage}" styleClass="image-navigation">
                    <h:graphicImage value="images/back.png" />
                    <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.imageIndex - 1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                </h:commandLink>

                <h:commandLink title="#{msgs.nextImage}" styleClass="image-navigation">
                    <h:graphicImage value="images/forward.png" />

                    <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.imageIndex + 1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                </h:commandLink>

                <h:commandLink title="#{msgs.lastImage}" styleClass="image-navigation">
                    <h:graphicImage value="images/end.png" />
                    <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.sizeOfImageList}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                </h:commandLink>

                <h:graphicImage value="#{AktuelleSchritteForm.myPlugin.bild}" rendered="#{AktuelleSchritteForm.myPlugin.image != null}" width="100%" />
            </h:panelGroup>

            <h:commandButton value="#{msgs.cancel}" action="#{AktuelleSchritteForm.myPlugin.cancel}" immediate="true" />

            <h:commandButton value="#{msgs.save}" action="#{AktuelleSchritteForm.myPlugin.save}" style="float: right" />

        </h:form>



    </ui:define>


</ui:composition>